{"title":"ç®—æ³•é¢˜ä¸­å½’å¹¶çš„åº”ç”¨","date":"2022-09-15T12:52:56.374Z","date_formatted":{"ll":"Sep 15, 2022","L":"09/15/2022","MM-DD":"09-15"},"thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/mohammad-alizade-CDu0x1Aiils-unsplash.jpg","link":"2022/09/15/merge-in-algorithm-problems","comments":true,"tags":["LeetCode"],"categories":["Algorithms"],"updated":"2022-09-15T04:52:56.374Z","content":"<p>å½’å¹¶æ’åºç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰, æ˜¯æ¯”è¾ƒå¸¸è§çš„æ’åºç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦åœ¨O(nlogn)ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨LeetCodeåˆ·é¢˜è¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šæœ‰å“ªäº›åº”ç”¨å‘¢ï¼Ÿ</p>\n<h3 id=\"å½’å¹¶æ’åº\">å½’å¹¶æ’åº<a title=\"#å½’å¹¶æ’åº\" href=\"#å½’å¹¶æ’åº\"></a></h3>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹å½’å¹¶æ’åºã€‚å…¶å®å½’å¹¶æ’åºä¸»è¦å°±ä¸¤ä¸ªéƒ¨åˆ†: å¯¹æ•°ç»„çš„å·¦å³éƒ¨åˆ†é€’å½’è°ƒç”¨è‡ªå·±ï¼Œç„¶åå¯¹å·¦å³ä¿©éƒ¨åˆ†è¿›è¡Œå½’å¹¶ã€‚ç†Ÿæ‚‰äºŒå‰æ ‘éå†çš„åŒå­¦è‚¯å®šä¼šå‘ç°ï¼Œè¿™å°±æ˜¯äºŒå‰æ ‘çš„åç»­éå†ã€‚</p>\n<p>å…¶å®ï¼Œå½’å¹¶çš„ä½œç”¨æ˜¯ä½¿å·¦å³ä¿©éƒ¨åˆ†æœ‰åºçš„æ•°ç»„å˜æˆä¸€ä¸ªå®Œæ•´çš„æœ‰åºæ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½’å¹¶æ“ä½œçš„å‰ææ¡ä»¶æ˜¯å·¦å³ä¿©éƒ¨åˆ†å¿…é¡»æœ‰åºã€‚</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">MergeSort</span>(<span class=\"params\"><span class=\"built_in\">int</span>[] arr, <span class=\"built_in\">int</span> left, <span class=\"built_in\">int</span> right</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (left &gt;= right)</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">int</span> mid = left + ((right - left) &gt;&gt; <span class=\"number\">1</span>);</span><br><span class=\"line\">    MergeSort(arr, left, mid);</span><br><span class=\"line\">    MergeSort(arr, mid + <span class=\"number\">1</span>, right);</span><br><span class=\"line\"></span><br><span class=\"line\">    Merge(arr, left, mid, right);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç®—æ³•é¢˜åº”ç”¨\">ç®—æ³•é¢˜åº”ç”¨<a title=\"#ç®—æ³•é¢˜åº”ç”¨\" href=\"#ç®—æ³•é¢˜åº”ç”¨\"></a></h3>\n<p>é‚£ä¹ˆï¼Œå¦‚æœä¸€äº›ç®—æ³•é¢˜ä¸­ï¼Œå¦‚æœæ•°ç»„çš„å·¦å³ä¸¤éƒ¨åˆ†å·²ç»æœ‰åºäº†ï¼Œæ˜¯å¦è¿™äº›é¢˜ä¼šæ›´å®¹æ˜“æ‰¾åˆ°è§£æ³•å‘¢ï¼Ÿ</p>\n<h4 id=\"æ•°ç»„ä¸­çš„é€†åºå¯¹ğŸ“\">æ•°ç»„ä¸­çš„é€†åºå¯¹<a href=\"https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/\">ğŸ“</a><a title=\"#æ•°ç»„ä¸­çš„é€†åºå¯¹ğŸ“\" href=\"#æ•°ç»„ä¸­çš„é€†åºå¯¹ğŸ“\"></a></h4>\n<blockquote>\n<p>åœ¨æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚æœå‰é¢ä¸€ä¸ªæ•°å­—å¤§äºåé¢çš„æ•°å­—ï¼Œåˆ™è¿™ä¸¤ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªé€†åºå¯¹ã€‚è¾“å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ±‚å‡ºè¿™ä¸ªæ•°ç»„ä¸­çš„é€†åºå¯¹çš„æ€»æ•°ã€‚</p>\n<blockquote>\n<p>ç¤ºä¾‹ 1:<br>\nè¾“å…¥: [7,5,6,4]<br>\nè¾“å‡º: 5</p>\n</blockquote>\n<blockquote>\n<p>é™åˆ¶ï¼š<br>\n0 &lt;= æ•°ç»„é•¿åº¦ &lt;= 50000</p>\n</blockquote>\n</blockquote>\n<p>æˆ‘ä»¬å…ˆæ¥ä¸¤ä¸ªæ•°(å°äºä¸¤ä¸ªæ•°,å°±å¯ä»¥ç›´æ¥è¿”å›0äº†), ä¾‹å¦‚[7, 5]ã€‚å…¶å®ï¼Œä¸€çœ‹å°±çŸ¥é“è¿™æ˜¯ä¸€ç»„é€†åºå¯¹ï¼Œä½†è®©æˆ‘ä»¬ç”¨å½’å¹¶æ’åºçš„æ€æƒ³å°±åˆ†æä¸€ä¸‹ã€‚<br>\n<img src=\"https://ichrisj.gitee.io/reslib/images/merge-in-algorithm-problems/reverse-pairs.jpg\" alt=\"reverse-pairs\" loading=\"lazy\"></p>\n<p>é¦–å…ˆæ•°ç»„çš„å·¦å³ä¿©éƒ¨åˆ†éƒ½æ˜¯æœ‰åºçš„ï¼Œå› ä¸ºå„è‡ªå°±ä¸€ä¸ªæ•°ã€‚å¯¹äºå³è¾¹<strong>5</strong>æ¥è¯´ï¼Œåœ¨å·¦è¾¹ä»<strong>7</strong>åˆ°ä¸­é—´ä½ç½®éƒ½æ¯”<strong>5</strong>å¤§ã€‚é‚£ä¹ˆä»<strong>7</strong>åˆ°ä¸­é—´çš„ä½ç½®ï¼Œæ€»å…±æœ‰1ä¸ªæ•°ï¼Œåˆ™æœ‰ä¸€ç»„é€†åºå¯¹ã€‚ä¹‹åå°†[7, 5]æ’åºã€‚</p>\n<p>åŒç†ï¼Œå¯¹äº[6, 4], åˆ†æå®ƒä»¬ä¹Ÿæ˜¯ä¸€ç»„é€†åºå¯¹ã€‚ç„¶åæ’åºã€‚</p>\n<p>æ’å®Œåºåï¼Œæ•°ç»„å˜æˆ[5, 7, 4, 6]ã€‚ä»å³è¾¹éƒ¨åˆ†å¼€å§‹çœ‹ï¼Œå¯¹äº<strong>4</strong>ï¼Œåœ¨å·¦è¾¹éƒ¨åˆ†ï¼Œå› ä¸º<strong>5</strong>æ¯”<strong>4</strong>å¤§ï¼Œé‚£ä¹ˆä»<strong>5</strong>åˆ°ä¸­é—´çš„ä½ç½®ï¼Œéƒ½å¯ä»¥ä¸<strong>4</strong>ç»„æˆé€†åºå¯¹ï¼Œé‚£ä¹ˆæœ‰ mid + 1 - index ç»„é€†åºå¯¹ï¼Œå³ 1 + 1 - 0 = 2 (è¿™é‡Œå·¦è¾¹éƒ¨åˆ†ä¸ç”¨ä»<strong>5</strong>å¼€å§‹å‘å³ä¸€ä¸€éå†ä¸<strong>4</strong>æ¯”è¾ƒï¼Œå› ä¸ºè¿™éƒ¨åˆ†æ˜¯æœ‰åºçš„ï¼Œè‚¯å®šéƒ½ä¸ä¼šå°äº<strong>5</strong>)ï¼›ä¹‹åçœ‹<strong>6</strong>ï¼Œå› ä¸ºå·¦è¾¹çš„<strong>5</strong>å°ï¼Œåˆ™å·¦è¾¹è¾¹å‘å³ç§»åŠ¨åˆ°<strong>7</strong>ï¼Œå…¶æ¯”<strong>6</strong>å¤§ï¼Œåˆ™å¯¹äº<strong>6</strong>æ¥è¯´ï¼Œå³è¾¹æœ‰ 1 + 1 - 1 = 1ä¸ªæ•°å¯ä»¥å®ƒç»„æˆé€†åºå¯¹ã€‚å³è¾¹éƒ¨åˆ†éå†ç»“æŸï¼Œå½’å¹¶æ’åºå°†æ•°ç»„å˜æœ‰åºã€‚</p>\n<p>æœ€åï¼Œæˆ‘ä»¬å°±ç»Ÿè®¡å‡ºæ€»å…±æœ‰5ç»„é€†åºå¯¹ã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼šåœ¨mergeæ’åºåˆ°è¾¾è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªä½ç½®å·¦å³ä¸¤è¾¹çš„å€¼ç›¸ç­‰ï¼Œåº”å…ˆå°†å·¦è¾¹çš„å€¼å…ˆæ”¾å…¥è¾…åŠ©æ•°ç»„ä¸­ã€‚å¦‚æœå…ˆå°†å³è¾¹çš„æ•°æ”¾å…¥è¾…åŠ©æ•°ç»„ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆç»“æœå˜å°ã€‚ä¾‹å¦‚ï¼Œå·¦å³ä¸¤ä¸ªåˆ†åˆ«æ˜¯a, b(a == b)ã€‚å¦‚æœæ­¤æ—¶açš„ä¸‹ä¸€ä½æ˜¯c(c &gt; a)ã€‚å¦‚æœå…ˆæŠŠaæ”¾å…¥è¾…åŠ©æ•°ç»„ï¼Œcè¿˜å¯ä»¥ä¸bç»„æˆé€†åºå¯¹ã€‚ä½†æ˜¯å¦‚æœbå…ˆæ”¾å…¥è¾…åŠ©æ•°ç»„ï¼Œé‚£ä¹ˆcå°±ä¸èƒ½ä¸bç»„æˆé€†åºå¯¹ï¼Œå¯¼è‡´ç»“æœå˜å°ã€‚</p>\n</blockquote>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"built_in\">int</span> <span class=\"title\">ReversePairs</span>(<span class=\"params\"><span class=\"built_in\">int</span>[] nums</span>)</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(nums == <span class=\"literal\">null</span> || nums.Length &lt; <span class=\"number\">2</span>)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ReversePairs(nums, <span class=\"number\">0</span>, nums.Length - <span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"built_in\">int</span> <span class=\"title\">ReversePairs</span>(<span class=\"params\"><span class=\"built_in\">int</span>[] nums, <span class=\"built_in\">int</span> le, <span class=\"built_in\">int</span> ri</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(le == ri)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">int</span> mid = le + ((ri - le) &gt;&gt; <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ReversePairs(nums, le, mid) </span><br><span class=\"line\">        + ReversePairs(nums, mid + <span class=\"number\">1</span>, ri) </span><br><span class=\"line\">        + Merge(nums, le, mid, ri);        </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"built_in\">int</span> <span class=\"title\">Merge</span>(<span class=\"params\"><span class=\"built_in\">int</span>[] nums, <span class=\"built_in\">int</span> le, <span class=\"built_in\">int</span> mid, <span class=\"built_in\">int</span> ri</span>)</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"built_in\">int</span>[] aux = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[ri - le + <span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; <span class=\"comment\">// è¾…åŠ©æ•°ç»„ä¸­å½“å‰ä½ç½®</span></span><br><span class=\"line\">    <span class=\"built_in\">int</span> l = le, r = mid + <span class=\"number\">1</span>; <span class=\"comment\">//numsæ•°ç»„ä¸­å·¦å³ä½ç½®</span></span><br><span class=\"line\">    <span class=\"built_in\">int</span> res = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(l &lt;= mid &amp;&amp; r &lt;= ri) </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœå·¦è¾¹lçš„å€¼æ¯”å³è¾¹rçš„å€¼å¤§ï¼Œé‚£ä¹ˆ[l..mid]ä¹‹é—´æ‰€æœ‰çš„æ•°éƒ½æ¯”rä½ç½®çš„æ•°å¤§</span></span><br><span class=\"line\">        <span class=\"comment\">// é‚£ä¹ˆå·¦è¾¹å°±æœ‰mid - l + 1ä¸ªæ•°å¯ä»¥ä¸rç»„æˆé€†åºå¯¹</span></span><br><span class=\"line\">        res += nums[l] &gt; nums[r] ? (mid - l + <span class=\"number\">1</span>) : <span class=\"number\">0</span>; </span><br><span class=\"line\">        aux[i++] = nums[l] &lt;= nums[r] ? nums[l++] : nums[r++];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(l &lt;= mid)</span><br><span class=\"line\">        aux[i++] = nums[l++];</span><br><span class=\"line\">    <span class=\"keyword\">while</span>(r &lt;= ri)</span><br><span class=\"line\">        aux[i++] = nums[r++];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; aux.Length; i++)</span><br><span class=\"line\">        nums[le + i] = aux[i];</span><br><span class=\"line\">    <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ğŸ“\">è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°<a href=\"https://leetcode-cn.com/problems/count-of-smaller-numbers-after-self/\">ğŸ“</a><a title=\"#è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ğŸ“\" href=\"#è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ğŸ“\"></a></h4>\n<blockquote>\n<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„numsï¼ŒæŒ‰è¦æ±‚è¿”å›ä¸€ä¸ªæ–°æ•°ç»„countsã€‚æ•°ç»„countsæœ‰è¯¥æ€§è´¨ï¼šcounts[i]çš„å€¼æ˜¯nums[i]å³ä¾§å°äºnums[i]çš„å…ƒç´ çš„æ•°é‡ã€‚</p>\n<p>ç¤ºä¾‹ 1ï¼š</p>\n<blockquote>\n<p>è¾“å…¥ï¼šnums = [5, 2, 6, 1]<br>\nè¾“å‡ºï¼š[2, 1, 1, 0]<br>\nè§£é‡Šï¼š<br>\n5 çš„å³ä¾§æœ‰ 2 ä¸ªæ›´å°çš„å…ƒç´  (2 å’Œ 1)<br>\n2 çš„å³ä¾§ä»…æœ‰ 1 ä¸ªæ›´å°çš„å…ƒç´  (1)<br>\n6 çš„å³ä¾§æœ‰ 1 ä¸ªæ›´å°çš„å…ƒç´  (1)<br>\n1 çš„å³ä¾§æœ‰ 0 ä¸ªæ›´å°çš„å…ƒç´ </p>\n</blockquote>\n</blockquote>\n<p><img src=\"https://ichrisj.gitee.io/reslib/images/merge-in-algorithm-problems/count-smaller.jpg\" alt=\"count smaller\" loading=\"lazy\"><br>\næˆ‘ä»¬è¿˜æ˜¯ä»å°èŒƒå›´çœ‹èµ·ï¼Œå…ˆçœ‹[5, 2]ã€‚é¦–å…ˆå·¦å³ä¿©è¾¹éƒ½æ˜¯æœ‰åºçš„ï¼Œå› ä¸ºå„è‡ªå°±ä¸€ä¸ªæ•°ã€‚å¯¹äºå·¦è¾¹çš„<strong>5</strong>ï¼Œå³è¾¹çš„<strong>2</strong>æ¯”å…¶å°ã€‚æ‰€ä»¥ç›®å‰<strong>5</strong>å³ä¾§æ¯”å…¶å°çš„æ•°é‡æ˜¯1ã€‚<strong>2</strong>å³è¾¹ç›®å‰æ²¡æ•°ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯0ã€‚å¾—åˆ°ç›®å‰ç­”æ¡ˆåï¼Œæ’åºã€‚</p>\n<p>åŒç†ï¼Œå¯¹äºæ•°ç»„[6, 1], <strong>6</strong>å³è¾¹çš„<strong>1</strong>æ¯”å…¶å°ï¼Œç›®å‰ç­”æ¡ˆæ˜¯1ã€‚<strong>1</strong>å³è¾¹æ²¡æ•°ï¼Œç­”æ¡ˆæ˜¯0ã€‚å¾—åˆ°ç›®å‰ç­”æ¡ˆï¼Œæ’åºã€‚</p>\n<p>ä¸Šé¢å·¦å³éƒ¨åˆ†æ’å®Œåºä¹‹åæ•°ç»„æ˜¯[2, 5, 1, 6]ã€‚æ­¤æ—¶è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆ<em>l</em>, <em>r</em>åˆ†åˆ«æŒ‡å‘å·¦è¾¹çš„<strong>5</strong>å’Œå³è¾¹çš„<strong>6</strong>ã€‚æ­¤æ—¶<strong>5</strong>&lt;<strong>6</strong>, <em>r</em>å‘å·¦ç§»åŠ¨åˆ°<strong>1</strong>ï¼Œæ­¤æ—¶ <strong>5</strong>&gt;<strong>1</strong>, é‚£ä¹ˆæ­¤æ—¶[mid + 1, r]ä¹‹é—´çš„æ‰€æœ‰æ•°éƒ½æ˜¯å°äº<strong>5</strong>ï¼Œæ»¡è¶³è¦æ±‚çš„ï¼Œå³æ€»å…±æœ‰ r - mid (2 - 1 = 1)ä¸ªï¼ŒåŠ ä¸Šä¹‹å‰çš„1ä¸ªï¼Œ<strong>5</strong>å³è¾¹æ»¡è¶³è¦æ±‚çš„æ•°é‡æ˜¯2ä¸ªã€‚ä¹‹åï¼Œlå‘å·¦ç§»åŠ¨åˆ°<strong>2</strong>ï¼Œæ­¤æ—¶ <strong>2</strong>&gt;<strong>1</strong>, æ»¡è¶³è¦æ±‚ï¼Œé‚£ä¹ˆ<strong>2</strong>å³è¾¹æœ‰1ä¸ªæ•°æ»¡è¶³è¦æ±‚ã€‚<em>l</em>ç»§ç»­å·¦ç§»ï¼Œè¶…å‡ºæ•°ç»„è¾¹ç•Œç»“æŸã€‚</p>\n<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°æ•°ç»„[5, 2, 6, 1]çš„ç­”æ¡ˆ[2, 1, 1, 0]ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå¦‚ä½•æŠŠç­”æ¡ˆå¡«å…¥è¿”å›æ•°ç»„å¯¹åº”ä½ç½®ä¸Šå‘¢ï¼Ÿå› ä¸ºæ•°ç»„numsæ˜¯è¢«æ’åºçš„ï¼Œæ¯ä¸ªå€¼éƒ½å¯èƒ½ä¼šè¢«ç§»åŠ¨çš„ã€‚å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¸ä½†æœ‰åŸæ•°ç»„çš„å…ƒç´ çš„å€¼ï¼Œè¿˜æºå¸¦å…ƒç´ çš„ä¸‹æ ‡ï¼Œè¿™æ ·åœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å§‹ç»ˆå¯ä»¥è·å–å…ƒç´ çš„åŸæ¥ä¸‹æ ‡ï¼Œå¹¶å°†ç­”æ¡ˆæ›´æ–°åˆ°è¿”å›æ•°ç»„ä¸­ã€‚(è¿™é‡Œæˆ‘æ‡’å¾—ä½¿ç”¨æ•°ç»„æˆ–åˆ›å»ºä¸€ä¸ªå¯¹è±¡å»åŒ…å«å…ƒç´ çš„å€¼å’Œä¸‹æ ‡ï¼Œç›´æ¥ä½¿ç”¨çš„C#ä¸­çš„å…ƒç»„äº†)</p>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">Solution</span> </span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"built_in\">int</span>[] smaller;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IList&lt;<span class=\"built_in\">int</span>&gt; <span class=\"title\">CountSmaller</span>(<span class=\"params\"><span class=\"built_in\">int</span>[] nums</span>)</span> </span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(nums == <span class=\"literal\">null</span> || nums.Length == <span class=\"number\">0</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">int</span>&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">        smaller = <span class=\"keyword\">new</span> <span class=\"built_in\">int</span>[nums.Length];</span><br><span class=\"line\">        (<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span>)[] keyNums = <span class=\"keyword\">new</span> (<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span>)[nums.Length]; <span class=\"comment\">//å…ƒç»„æ•°ç»„</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"built_in\">int</span> i = <span class=\"number\">0</span>; i &lt; nums.Length; i++)</span><br><span class=\"line\">            keyNums[i] = (nums[i], i); <span class=\"comment\">// åˆå§‹åŒ–å…ƒç»„ï¼Œç¬¬ä¸€ä¸ªæ˜¯å…ƒç´ çš„å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸‹æ ‡</span></span><br><span class=\"line\">        CountSmaller(keyNums, <span class=\"number\">0</span>, nums.Length - <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> List&lt;<span class=\"built_in\">int</span>&gt;(smaller);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">CountSmaller</span>(<span class=\"params\">(<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span></span>)[] keyNums, <span class=\"built_in\">int</span> le, <span class=\"built_in\">int</span> ri)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(le == ri)</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"built_in\">int</span> mid = le + ((ri - le) &gt;&gt; <span class=\"number\">1</span>);</span><br><span class=\"line\">        CountSmaller(keyNums, le, mid);</span><br><span class=\"line\">        CountSmaller(keyNums, mid + <span class=\"number\">1</span>, ri);</span><br><span class=\"line\">        Merge(keyNums, le, mid, ri);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">Merge</span>(<span class=\"params\">(<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span></span>)[] keyNums, <span class=\"built_in\">int</span> le, <span class=\"built_in\">int</span> mid, <span class=\"built_in\">int</span> ri)</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">int</span> l = mid, r = ri;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &gt;= le &amp;&amp; r &gt; mid)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">// å¦‚æœnums[l] &lt;= nums[r]ï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œrå‘å·¦ç§»åŠ¨</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(keyNums[l].Item1 &lt;= keyNums[r].Item1)</span><br><span class=\"line\">                r--;</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"comment\">// å¦åˆ™ï¼Œ[mid + 1ï¼Œ r]ä¹‹é—´çš„æ•°éƒ½æ»¡è¶³è¦æ±‚ï¼Œæ›´æ–°ç»“æœã€‚lå‘å·¦ç§»ã€‚</span></span><br><span class=\"line\">                smaller[keyNums[l].Item2] += r - mid;</span><br><span class=\"line\">                l--;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        (<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span>)[] aux = <span class=\"keyword\">new</span> (<span class=\"built_in\">int</span>, <span class=\"built_in\">int</span>)[ri - le + <span class=\"number\">1</span>];</span><br><span class=\"line\">        <span class=\"built_in\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        l = le;</span><br><span class=\"line\">        r = mid + <span class=\"number\">1</span>;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt;= mid &amp;&amp; r &lt;= ri)</span><br><span class=\"line\">            aux[i++] = keyNums[l].Item1 &lt;= keyNums[r].Item1 ? keyNums[l++] : keyNums[r++];</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(l &lt;= mid)</span><br><span class=\"line\">            aux[i++] = keyNums[l++];</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(r &lt;= ri)</span><br><span class=\"line\">            aux[i++] = keyNums[r++];</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; aux.Length; i++)</span><br><span class=\"line\">            keyNums[i + le] = aux[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸‹é¢ä¸¤é¢˜çš„åˆ†æé€»è¾‘åŸºæœ¬ä¸Šå·®ä¸å¤šï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è§£ç­”ä¸€ä¸‹<br>\nç¿»è½¬å¯¹<a href=\"https://leetcode-cn.com/problems/reverse-pairs/\" target=\"_blank\">ğŸ“</a><br>\nåŒºé—´å’Œçš„ä¸ªæ•°<a href=\"https://leetcode-cn.com/problems/count-of-range-sum/\" target=\"_blank\">ğŸ“</a></p>\n","prev":{"title":"Seamless sign in Portal with ADFS","link":"2022/09/15/seamless-sign-in-portal-with-adfs"},"next":{"title":"Hello World","link":"2022/09/15/hello-world"},"plink":"https://blog.citysouth.cc/2022/09/15/merge-in-algorithm-problems/","toc":[{"id":"å½’å¹¶æ’åº","title":"å½’å¹¶æ’åº","index":"1"},{"id":"ç®—æ³•é¢˜åº”ç”¨","title":"ç®—æ³•é¢˜åº”ç”¨","index":"2","children":[{"id":"æ•°ç»„ä¸­çš„é€†åºå¯¹ğŸ“","title":"æ•°ç»„ä¸­çš„é€†åºå¯¹ğŸ“","index":"2.1"},{"id":"è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ğŸ“","title":"è®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ğŸ“","index":"2.2"}]}],"copyright":{"link":"<a href=\"https://blog.citysouth.cc/2022/09/15/merge-in-algorithm-problems/\" title=\"ç®—æ³•é¢˜ä¸­å½’å¹¶çš„åº”ç”¨\">https://blog.citysouth.cc/2022/09/15/merge-in-algorithm-problems/</a>","license":"è‡ªç”±è½¬è½½-éå•†ç”¨-ç¦æ­¢æ¼”ç»-ä¿æŒç½²å Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" target=\"_blank\">CC BY-NC-ND 4.0</a>)","published":"September 15, 2022"},"reading_time":"2041 words in 17 min"}