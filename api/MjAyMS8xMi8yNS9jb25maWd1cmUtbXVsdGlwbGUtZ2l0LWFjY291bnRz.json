{"title":"配置多个Git账号","date":"2021-12-25T14:36:09.000Z","date_formatted":{"ll":"2021年12月25日","L":"2021/12/25","MM-DD":"12-25"},"thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/yancy-min-842ofHC6MaI-unsplash.jpg","link":"2021/12/25/configure-multiple-git-accounts","comments":true,"tags":["misc"],"updated":"2022-09-15T04:52:56.372Z","content":"<p>程序员同学在平时工作和学习过程中经常会遇到, 自己有多个git账号, 有的是工作的有的个人学习用的, 后者自己有多个git账号分别在不同平台,如github, gitee, bitbucket等等. 但电脑就一台, 那如何快捷有效的使用这个账号在不同的项目中去提交代码呢? 我们可以配置SSH key.</p>\n<h3 id=\"清除git全局配置\">清除git全局配置<a title=\"#清除git全局配置\" href=\"#清除git全局配置\"></a></h3>\n<p>如果之前通过git命令设置过全局的user.name和user.email, 首先我们需要把它删除掉.</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config -<span class=\"literal\">-global</span> user.name <span class=\"string\">&quot;your_name&quot;</span></span><br><span class=\"line\">git config -<span class=\"literal\">-global</span> user.email  <span class=\"string\">&quot;your_email&quot;</span></span><br></pre></td></tr></table></figure>\n<p>如果不清楚自己之前是否设置过, 可以通过这个命令去检查一下. 并用下面的命令去删除.</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查看全局配置</span></span><br><span class=\"line\">git config -<span class=\"literal\">-global</span> -<span class=\"literal\">-list</span></span><br><span class=\"line\"><span class=\"comment\"># 删除全局配置的用户名</span></span><br><span class=\"line\">git config -<span class=\"literal\">-global</span> -<span class=\"literal\">-unset</span> user.name</span><br><span class=\"line\"><span class=\"comment\"># 删除全局配置的邮箱</span></span><br><span class=\"line\">git config -<span class=\"literal\">-global</span> -<span class=\"literal\">-unset</span> user.email</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ichrisj.gitee.io/reslib/images/configure-multiple-git-accounts/gitconfig.jpg\" alt=\"\" loading=\"lazy\" class=\"φbp\"></p>\n<p>其实这些配置数据, 如果没有特别设置路径, 默认是存在<code>C:\\Users\\&lt;user_name&gt;\\.gitconfig</code> <code>(Windows系统)</code>, 所有可以找到这个文件, 然后用notepad打开之间修改保存.</p>\n<h3 id=\"配置ssh-keys\">配置SSH Keys<a title=\"#配置ssh-keys\" href=\"#配置ssh-keys\"></a></h3>\n<h4 id=\"生成ssh-keys\">生成SSH Keys<a title=\"#生成ssh-keys\" href=\"#生成ssh-keys\"></a></h4>\n<p>首先需要去生成SSH Keys, 先去<code>C:\\Users\\&lt;user_name&gt;\\.ssh</code>文件夹. 如果路径下没有<code>.ssh</code>文件夹, 可以创建一个。然后在命令行中用<code>ssh-keygen -t rsa -C &quot;new email&quot;</code>去生成key的两个文件，分别是公钥和私钥。其中<code>.pub</code>是公钥。<br>\n<img src=\"https://ichrisj.gitee.io/reslib/images/configure-multiple-git-accounts/sshkeygen.jpg\" alt=\"\" loading=\"lazy\"></p>\n<h4 id=\"私钥文件添加到ssh-agent\">私钥文件添加到SSH Agent<a title=\"#私钥文件添加到ssh-agent\" href=\"#私钥文件添加到ssh-agent\"></a></h4>\n<p>默认ssh-agent只会读取id_rsa文件，为了让它识别我们新生成的私钥，需要用<code>ssh-add</code>将这些私钥添加到ssh-agent中。<br>\n<img src=\"https://ichrisj.gitee.io/reslib/images/configure-multiple-git-accounts/sshadd.jpg\" alt=\"\" loading=\"lazy\"></p>\n<blockquote>\n<ul>\n<li>添加时如果出现 <em><code>Could not open a connection to your authentication agent</code></em> 错误，请先运行<code>ssh-agent bash</code>命令，之后在添加。</li>\n<li>如果运行<code>ssh-agent bash</code>是出现 <em><code> unable to start ssh-agent service, error :1058</code></em>, 请检查 <code> OpenSSH Authentication Agent</code> 服务，确保其是运行状态。<em>ref: <a href=\"https://stackoverflow.com/questions/52113738/starting-ssh-agent-on-windows-10-fails-unable-to-start-ssh-agent-service-erro\" target=\"_blank\">https://stackoverflow.com/questions/52113738/starting-ssh-agent-on-windows-10-fails-unable-to-start-ssh-agent-service-erro</a></em></li>\n</ul>\n</blockquote>\n<h4 id=\"配置config文件\">配置config文件<a title=\"#配置config文件\" href=\"#配置config文件\"></a></h4>\n<p>之后，我们需要配置<code>config</code>文件。请看<code>.ssh</code>路径下是否有该文件，如果没有创建一个。然后可以仿照下面的内容去填写相应的你的config配置。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Default github </span></span><br><span class=\"line\">Host github.com</span><br><span class=\"line\">    HostName github.com</span><br><span class=\"line\">    User <span class=\"string\">&quot;&lt;user_name&gt;&quot;</span></span><br><span class=\"line\">    IdentityFile ~/.ssh/id_rsa_github</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># gitee</span></span><br><span class=\"line\">Host gitee.com</span><br><span class=\"line\">    HostName gitee.com</span><br><span class=\"line\">    User <span class=\"string\">&quot;&lt;user_name&gt;&quot;</span></span><br><span class=\"line\">    IdentityFile ~/.ssh/id_rsa_gitee</span><br></pre></td></tr></table></figure>\n<h4 id=\"添加公钥到git系统\">添加公钥到Git系统<a title=\"#添加公钥到git系统\" href=\"#添加公钥到git系统\"></a></h4>\n<p>基本上所有支持git的网站都会有添加SSH Key的地方，例如github是在<code>https://github.com/settings/keys</code>。添加新的ssh key， 并将之前生成相应的<code>.pub</code>文件中的内容复制过去。</p>\n<h4 id=\"测试配置\">测试配置<a title=\"#测试配置\" href=\"#测试配置\"></a></h4>\n<p>最后，我们就可以用<code>ssh -T</code>命令去测试是否配置成功。<br>\n<img src=\"https://ichrisj.gitee.io/reslib/images/configure-multiple-git-accounts/sshtest.jpg\" alt=\"\" loading=\"lazy\"></p>\n<p>之后，有新的git账号，可以按同样的步骤，添加设置新的账号。千万不要为git配置全局的user.name和user.email。我们只需要在不同的repository设置本地的user.name和user.email。</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config user.name <span class=\"string\">&quot;your_name&quot;</span></span><br><span class=\"line\">git config user.email  <span class=\"string\">&quot;your_email&quot;</span></span><br></pre></td></tr></table></figure>\n","prev":{"title":"浅谈KMP算法","link":"2021/12/27/kmp-algo"},"plink":"http://b.alphac.cn/2021/12/25/configure-multiple-git-accounts/","toc":[{"id":"清除git全局配置","title":"清除git全局配置","index":"1"},{"id":"配置ssh-keys","title":"配置SSH Keys","index":"2","children":[{"id":"生成ssh-keys","title":"生成SSH Keys","index":"2.1"},{"id":"私钥文件添加到ssh-agent","title":"私钥文件添加到SSH Agent","index":"2.2"},{"id":"配置config文件","title":"配置config文件","index":"2.3"},{"id":"添加公钥到git系统","title":"添加公钥到Git系统","index":"2.4"},{"id":"测试配置","title":"测试配置","index":"2.5"}]}],"copyright":{"link":"<a href=\"http://b.alphac.cn/2021/12/25/configure-multiple-git-accounts/\" title=\"配置多个Git账号\">http://b.alphac.cn/2021/12/25/configure-multiple-git-accounts/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" target=\"_blank\">CC BY-NC-ND 4.0</a>)","published":"2021年12月25日"},"reading_time":"816 字约 7 分钟"}