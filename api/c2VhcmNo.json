[{"title":"Local Event Website Environment for Dynamics Marketing","date":"2022-10-06T17:34:07.000Z","date_formatted":{"ll":"Oct 6, 2022","L":"10/06/2022","MM-DD":"10-06"},"updated":"2022-10-08T15:29:06.470Z","content":"In Dynamics Marketing, the event management feature helps you to organize, manage, and process the events. When you install the event management solution, you get an event portal that gives the users a web application where they can get to know more about the event details.\nEvent Portal is not like other types of Portals using Portal Editor in https://make.powerapps.com, or updating configuration records in Dataverse to change the UI and add functionalities. It doesnâ€™t mean those ways totally do not work, but not the recommended ways. Event Portal is built using the Angular framework, so you need to have some knowledge of Angular to customize it. Here letâ€™s set up a local Event Portal development environment and how push changes to Event Portal.\n1. Set up an Angular environment\nTo install Angular on your local system, you need the following:\n\nInstall Node.js version 10.x or higher.\nOpen Command Prompt or Windows PowerShell and run the command to check whether the installation was successful.1node -v\n\nRun the command to install the Angular CLI (command-line interface) required to build and run the Angular application.1npm install -g @angular/cli\n\n[!NOTE]\nOn Windows client computers, the execution of PowerShell scripts is disabled by default. To allow the execution of PowerShell scripts, which is needed for npm global binaries, you must set the following execution policy:\n1Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned\n\n\nMake sure you have an IDE to develop Angular website. Visual Studio Code is a good option. You can install and use it develop your application, but not mandatory.\n\n2. Download the sample code\n\nDownload the latest source code for the sample event website\nExtract the code onto somewhere and open the â€œreleaseâ€ folder in VS Code.\n\nBack to the Command Prompt or PowerShell, and navigate to â€œreleaseâ€ folder where the source code is downloaded, run the command npm install to fetch all the necessary packages required to run the website. 1npm install\n\n\n3. Power Apps Portal hosted event website\nThere are some differences of event website hosted on Event Portal or Self-hosted. If an Event Portal is provisioned for the Dynamics Marketing environment, we can customize the website locally, then push the changes to the Event Portal.\n\n\nOnce the â€œreleaseâ€ folder is opened in the VS Code, please copy all content from environment.d365.ts to environment.ts in src\\environments\\ folder.\n\n\nOnce copied, please update the apiEndpoint to the Event Portal url.\n\n\n[!NOTE]\nMake sure the trailing slash / is at the end of the URL\nIf the Event Portal is configured the custom domain, please use the custom url instead.\n\n\n\nGo the Portal Management app in the Marketing environment, create a Site Setting record with Name as HTTP/Access-Control-Allow-Origin and Value as https://localhost:4200\n\n\n\nBack to the Command Prompt or Windows PowerShell and run the command from the root directory to build and locally serve the website.\n 1ng serve --ssl\n\n\n\nAccess https://localhost:4200 in browser to open the website. Now you can update the source code in VS Code, then see the change reflect in the website.\n\n\nDeploy the changes to Event Portal.\n\nOnce you complete the customizations in source code, you want push the changes to the Event Portal, please run the script Scripts\\DeployToDynamics365Instance.ps1 in PowerShell.\nThe script will build the source code first, then pop up an Interactive Login for you to login the Dataverse environment.\nAfter login, select the target environment, then the changes will be pushed to the environment.\n\n\n\n\nAfterwards, the customizations will be reflected in the Event Portal. (Clear cache if the customizations donâ€™t show in time.)\n\n\n4. Self-hosted event website\nIf no Event Portal provisioned for the Dynamics Marketing environment, you can also set up the local event to customize the event website, but you need manually deploy the code to IIS, Azure Web App, etc.\n\nOnce the â€œreleaseâ€ folder is opened in the VS Code, please copy all content from environment.selfhosted.ts to environment.ts in src\\environments\\ folder.\nOpen the Marketing environment, navigate to Settings &gt; Event management &gt; Web applications from SiteMap.\nTry to create a Web application record for local testing, set the Origin to http://localhost:4200 which we will launch the website in the URL by default. Save the record, then the values of Token and Endpoint will be generated automatically. Copy the values.\n\nGo back to the environment.ts in VS Code and update apiEndpoint with value from Endpoint and set emApplicationtoken to the value of Token\n\nGo back to the Command Prompt or Windows PowerShell and run the command from the root directory to build and locally serve the website. 1ng serve\n\nAccess http://localhost:4200 in browser to open the website.\n\n\n[!TIP]\nIf the Origin is to https://localhost:4200 in step 3, then you need to use the command ng serve -ssl to run and open the website via https://localhost:4200\n\nReferences\nhttps://learn.microsoft.com/en-us/dynamics365/marketing/developer/event-management-web-application\nhttps://learn.microsoft.com/en-us/dynamics365/marketing/developer/portal-hosted\nhttps://learn.microsoft.com/en-us/dynamics365/marketing/developer/self-hosted\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/local-event-website-environment-for-Dynamics-Marketing/local-event-website-environment-for-Dynamics-Marketing.jpg","plink":"http://b.alphac.cn/2022/10/06/local-event-website-environment-for-Dynamics-Marketing/"},{"title":"Power Apps Portalä¸­JSON type Web Templateçš„ä½¿ç”¨","date":"2022-09-15T13:25:14.000Z","date_formatted":{"ll":"2022å¹´9æœˆ15æ—¥","L":"2022/09/15","MM-DD":"09-15"},"updated":"2022-09-15T08:12:15.891Z","content":"éšç€Power Apps Portalçš„Web APIåŠŸèƒ½çš„å¢åŠ ï¼Œç”¨æˆ·å¯ä»¥çµæ´»çš„ä½¿ç”¨å®ƒå¯¹æ•°æ®è¿›è¡ŒCURDã€‚ä½†æ˜¯å¦‚æœå¼€æ”¾æŸä¸ªentityçš„Web APIåœ¨å»è·å–æ•°æ®çš„è¯ï¼Œå®ƒæ²¡åŠæ³•åƒList OData Feedæ ¹æ®æŸä¸ªViewæŸ¥è¯¢å‡ºæ¥çš„ç»“æœè¿”å›æ•°æ®ï¼Œä¹Ÿå¾ˆéš¾ç”¨link-entityåšä¸€äº›æ•°æ®è¿‡æ»¤ã€‚List OData Feedçš„åŠŸèƒ½å¿«è¦é€€å½¹äº†ï¼Œä¸ç”¨OData, æˆ‘ä»¬è¯¥å¦‚ä½•å®ç°è¿™ç§ç±»ä¼¼çš„åŠŸèƒ½å‘¢ï¼Ÿæ¥å°è¯•ä¸€ä¸‹JSON type Web Templateå§\n\n\nåˆ›å»ºä¸€ä¸ª Web Template, å°†MIME Typeè®¾å€¼ä¸ºapplication/json. ç„¶ååœ¨Sourceä¸­æ·»åŠ FetchXmlå’Œä¸€äº›ç”ŸæˆJSONæ•°æ®çš„ä»£ç ã€‚å¯ä»¥å‚ç…§ä¸‹é¢çš„æˆªå›¾ã€‚\nContact JSON Web Template\n\nä¸‹é¢æ˜¯Contact JSON web templateçš„ç¤ºä¾‹ä»£ç ã€‚è¯¥ç¤ºä¾‹ä¸­ç”¨æ¥è·å–æ‰€æœ‰çš„contactè®°å½•ï¼Œè¿™äº›contactè®°å½•å¯¹åº”çš„Accountçš„åå­—ä¸­åŒ…å«&quot;Corporation&quot;ã€‚å¦‚æœæœ‰â€™jobtitleâ€™çš„å‚æ•°ä¼ å…¥ï¼Œä¼šè¿‡æ»¤æœ‰æ”¹jobtitleçš„contactè®°å½•ã€‚å¦‚æœæœ‰ç»“æœï¼Œè¿”å›åŒ…å«name, id å’Œ emailçš„jsonæ•°æ®ï¼›åä¹‹è¿”å›No data.\n12345678910111213141516171819202122232425262728293031323334353637&#123;% fetchxml contacts %&#125; &lt;fetch version=&quot;1.0&quot; output-format=&quot;xml-platform&quot; mapping=&quot;logical&quot; distinct=&quot;false&quot;&gt;   &lt;entity name=&quot;contact&quot;&gt;     &lt;attribute name=&quot;fullname&quot; /&gt;     &lt;attribute name=&quot;contactid&quot; /&gt;     &lt;attribute name=&quot;emailaddress1&quot; /&gt;     &lt;order attribute=&quot;fullname&quot; descending=&quot;false&quot; /&gt;     &#123;% if request.params[&#x27;jobtitle&#x27;] %&#125;     &lt;filter type=&quot;and&quot;&gt;       &lt;condition attribute=&quot;jobtitle&quot; operator=&quot;eq&quot; value=&quot;&#123;&#123;request.params[&#x27;jobtitle&#x27;]&#125;&#125;&quot; /&gt;     &lt;/filter&gt;     &#123;% endif %&#125;     &lt;link-entity name=&quot;account&quot; from=&quot;accountid&quot; to=&quot;parentcustomerid&quot; link-type=&quot;inner&quot; alias=&quot;ab&quot;&gt;       &lt;filter type=&quot;and&quot;&gt;         &lt;condition attribute=&quot;name&quot; operator=&quot;like&quot; value=&quot;%Corporation%&quot; /&gt;       &lt;/filter&gt;     &lt;/link-entity&gt;   &lt;/entity&gt; &lt;/fetch&gt; &#123;% endfetchxml %&#125; &#123;% if contacts.results.entities.size &gt; 0 %&#125; &#123;   &quot;values&quot;:   [     &#123;% for contact in contacts.results.entities %&#125;     &#123;       &quot;name&quot;:  &quot;&#123;&#123;contact.fullname&#125;&#125;&quot;,       &quot;id&quot;: &quot;&#123;&#123;contact.id&#125;&#125;&quot;,       &quot;email&quot;: &quot;&#123;&#123;contact.emailaddress1&#125;&#125;&quot;     &#125;     &#123;% unless forloop.last %&#125;,&#123;% endunless %&#125;     &#123;% endfor %&#125;   ] &#125; &#123;% else %&#125; No data. &#123;% endif %&#125;\n\n\nåˆ›å»ºä¸€ä¸ªPage Template, å°†ä¸Šé¢åˆ›å»ºçš„Contact JSON web templateè®¾ç½®ç»™Web Templateå­—æ®µã€‚ä¸è¦é€‰ä¸­Use Website Header and Footer\nGet Contact JSON Page Template\n\n\n\nç°åœ¨åˆ›å»ºWeb Pageï¼Œå¹¶å°†Page Templateå­—æ®µè®¾ç½®æˆä¸Šé¢åˆ›å»ºçš„Get Contact JSON page template, å¹¶è®¾ç½®Partial URL, è¿™æ˜¯ä¹‹åè·å–jsonæ•°æ®çš„URL.\nGet Contact JSON Web Page:\n\n\n\nç»™å¯¹åº”Entityåˆ›å»ºTable Permission, æ·»åŠ æƒé™ï¼Œå¹¶å°†å…¶åˆ†é…ç»™ç›¸åº”çš„Web Role. è¿™æ ·æ‹¥æœ‰æ”¹web roleçš„Portal Userå°±å¯ä»¥è·å–æ•°æ®äº†ã€‚å¦‚å›¾ï¼Œç¤ºä¾‹ä¸­æˆ‘ä»¬ä¸ºcontact entityåˆ›å»ºçš„table permissionå¹¶æ·»åŠ äº†å…¨å±€Readçš„æƒé™(Readæƒé™å°±å¤Ÿäº†)\nContact - Global Access Table Permission\n\n\n\næˆ‘ä»¬æ¥çœ‹çœ‹ç¤ºä¾‹æ¼”ç¤ºã€‚è¿™é‡Œæˆ‘ä»¬å°†ä¸Šé¢çš„table permissionåˆ†é…ç»™Authenticated User web role. æˆ‘çš„CRMä¸­æœ‰ä¸‰æ¡contactè®°å½•ï¼Œå¥¹ä»¬å¯¹åº”çš„accountçš„åå­—ä¸­åŒ…å«&quot;Corporation&quot;ã€‚è¿™ä¸‰æ¡è®°å½•ä¸­æœ‰ä¿©æ¡å¥¹ä»¬çš„jobtitleæ˜¯Owner.\n\nå½“æ‹¥æœ‰Authenticated User web roleçš„Portal Userè®¿é—®~/getcontactjsonæ—¶\n\nå¦‚æœåœ¨URLä¸­æ·»åŠ å‚æ•°ï¼Œä¾‹å¦‚~/getcontactjson/?jobtitle=Owner\n\nå¦‚æœæ˜¯åŒ¿åè®¿é—®~/getcontactjson\n\nè¿™æ ·æˆ‘ä»¬å°±å®Œå…¨å¯ä»¥åœ¨Portalä¸­çš„æŸäº›é¡µé¢å†™JavaScriptä»£ç å‘é€Ajaxè¯·æ±‚æ¥è·å–è¯¥æ•°æ®å¹¶åšç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚\n\n\n\n\n[!NOTE]\nåœ¨æ­¥éª¤3ä¸­ï¼Œæˆ‘ä»¬å°†Homeä½œä¸ºParent Page, å…¶å®ä¹Ÿå¯ä»¥åªç”¨å…¶ä»–é¡µé¢ä½œä¸ºParent Pageï¼Œä½†è®¿é—®çš„URLä¹Ÿè¦åšç›¸åº”çš„è°ƒæ•´ã€‚\nå› ä¸ºgetcontactjsonæ˜¯web pageï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ·»åŠ Web Page Access Control Ruleæ¥æ§åˆ¶æ˜¯å¦é™åˆ¶æŸäº›Web Roleçš„Portal Useræ¥è®¿é—®\n\n\nè°¢è°¢ï¼\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/json-type-web-template-in-portals.jpg","plink":"http://b.alphac.cn/2022/09/15/json-type-web-template-in-portals/"},{"title":"Seamless sign in Portal with ADFS","date":"2022-09-15T12:52:56.375Z","date_formatted":{"ll":"2022å¹´9æœˆ15æ—¥","L":"2022/09/15","MM-DD":"09-15"},"updated":"2022-09-15T04:52:56.375Z","content":"Starts from CRM Portal v8.0, all the Portal instances are online deployed (except one open source Portal). Portal also provides multiple entries from user to register/sign in it. That means domain users are also to sign in Portal. However, sometimes itâ€™s annoying that every time we need to type our credentials to sign in the Portal even we are in the intranet. Whether we can implement seamless sign in Portal under an intranet?\nHere is one way: ADFS (WS-Federation)\nTo implement this, we need to add make some configurations on two parts: ADFS server and the Portal associated CRM org.\n\nNot include Employee Self Service Portal as it is only configured Azure AD to login\n\nADFS Server\nIn order to configure ADFS with Portal online, please make sure the ADFS is accessible from internet. That means we are able to access https://adfs.contoso.com/FederationMetadata/2007-06/FederationMetadata.xml and https://adfs.contoso.com/adfs/ls/idpinitiatedsignon.aspx.\nAfter that, letâ€™s add some settings to AD FS Management tool.\nref: https://docs.microsoft.com/en-us/powerapps/maker/portals/configure/configure-ws-federation-settings#create-an-ad-fs-relying-party-trust\nCreate an AD FS relying party trust\nUsing the AD FS Management tool, go to Trust Relationships &gt; Relying Party Trusts.\n\nSelect Add Relying Party Trust.\nWelcome: Select Start.\nSelect Data Source: Select Enter data about the relying party manually, and then select Next.\nSpecify Display Name: Enter a name, and then select Next.\nExample: https://portal.contoso.com/\nChoose Profile: Select AD FS 2.0 profile, and then select Next.\nConfigure Certificate: Select Next.\nConfigure URL: Select the Enable support for the WS-Federation Passive protocol check box.\n\nRelying party WS-Federation Passive protocol URL: Enter https://portal.contoso.com/signin-federation\n\n\nNote: AD FS requires that the portal run on HTTPS.\n\nThe resulting endpoint has the following settings:\nEndpoint type: WS-Federation\n\nBinding: POST\nIndex: n/a (0)\nURL: https://portal.contoso.com/signin-federation\n\n\n\n\n\nConfigure Identities: Specify https://portal.contoso.com/, select Add, and then select Next.\nIf applicable, more identities can be added for each additional relying party portal. Users will be able to authenticate across any or all of the available identities.\nChoose Issuance Authorization Rules: Select Permit all users to access this relying party, and then select Next.\nReady to Add Trust: Select Next.\nSelect Close.\n\nAdd the Name ID claim to the relying party trust:\nTransformWindows account name to Name ID claim (Transform an Incoming Claim):\n\nIncoming claim type: Windows account name\nOutgoing claim type: Name ID\nOutgoing name ID format: Unspecified\nPass through all claim values\n\nPortal Management in CRM Org\nAfter the configurations on AD FS, we can add some Portal related settings on CRM.\nCreate AD FS related site settings\nGo to CRM &gt; Portals &gt; Site Settings, apply portal site settings referencing the above AD FS Relying Party Trust.\nref: https://docs.microsoft.com/en-us/powerapps/maker/portals/configure/configure-ws-federation-settings#create-ad-fs-site-settings\nA standard AD FS (STS) configuration only uses the following settings (with example values):\n\nAuthentication/WsFederation/ADFS/MetadataAddress - https://adfs.contoso.com/FederationMetadata/2007-06/FederationMetadata.xml\nAuthentication/WsFederation/ADFS/AuthenticationType - http://adfs.contoso.com/adfs/services/trust\n\nUse the value of the entityID attribute in the root element of the Federation Metadata (open the MetadataAddress URL in a browser that is the value of the above site setting)\n\n\nAuthentication/WsFederation/ADFS/Wtrealm - https://portal.contoso.com/\nAuthentication/WsFederation/ADFS/Wreply - https://portal.contoso.com/signin-federation\n\nAuto navigate to sign in page\nIn order to automatically navigate to the sign in after typing the Portal URL, we need to create an â€œWeb Page Access Control Ruleâ€ record.\n\n\nName\nValue\n\n\n\n\nName\nA title used for reference. eg: â€œGrant Access to Authenticated Usersâ€\n\n\nWebsite\nPortal website\n\n\nWeb Page\nHome\n\n\nRight\nRestrict Read\n\n\nScope\nExclude direct child web files\n\n\nWeb Roles\nAdd â€œAuthenticated Usersâ€ web role\n\n\nSet ADFS as default log in entry\nAdd/update this site setting to make Portal set AD FS as default sign in channel. When we navigate to sign in page, it will automatically navigate the AD FS sign page, just like the ADFS button is clicked.\n\nAuthentication/Registration/LoginButtonAuthenticationType - http://adfs.contoso.com/adfs/services/trust\n\nAdditional\n\n\nWe need to add the AD FS url http://adfs.contoso.com as Local Intranet website in IE\n\nTo locate the Local intranet dialog box in Internet Explorer, click Tools, click Internet Options, click Security, and then click Local intranet.\n\n\n\nIn AD FS Management tool, make sure the â€œWindows Authenticationâ€ is ticked for Intranet.\n\nto find â€œWindows Authenticationâ€ in the AD FS Management tool, go to Authentication Policies &gt; Primary Authentication &gt; Global Setting &gt; Edit &gt; Intranet section\n\n\n\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/pedro-lastra-Y9utglm0VpQ-unsplash.jpg","plink":"http://b.alphac.cn/2022/09/15/seamless-sign-in-portal-with-adfs/"},{"title":"ç®—æ³•é¢˜ä¸­å½’å¹¶çš„åº”ç”¨","date":"2022-09-15T12:52:56.374Z","date_formatted":{"ll":"2022å¹´9æœˆ15æ—¥","L":"2022/09/15","MM-DD":"09-15"},"updated":"2022-09-15T04:52:56.374Z","content":"å½’å¹¶æ’åºç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰, æ˜¯æ¯”è¾ƒå¸¸è§çš„æ’åºç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦åœ¨O(nlogn)ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨LeetCodeåˆ·é¢˜è¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šæœ‰å“ªäº›åº”ç”¨å‘¢ï¼Ÿ\nå½’å¹¶æ’åº\né¦–å…ˆï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹å½’å¹¶æ’åºã€‚å…¶å®å½’å¹¶æ’åºä¸»è¦å°±ä¸¤ä¸ªéƒ¨åˆ†: å¯¹æ•°ç»„çš„å·¦å³éƒ¨åˆ†é€’å½’è°ƒç”¨è‡ªå·±ï¼Œç„¶åå¯¹å·¦å³ä¿©éƒ¨åˆ†è¿›è¡Œå½’å¹¶ã€‚ç†Ÿæ‚‰äºŒå‰æ ‘éå†çš„åŒå­¦è‚¯å®šä¼šå‘ç°ï¼Œè¿™å°±æ˜¯äºŒå‰æ ‘çš„åç»­éå†ã€‚\nå…¶å®ï¼Œå½’å¹¶çš„ä½œç”¨æ˜¯ä½¿å·¦å³ä¿©éƒ¨åˆ†æœ‰åºçš„æ•°ç»„å˜æˆä¸€ä¸ªå®Œæ•´çš„æœ‰åºæ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½’å¹¶æ“ä½œçš„å‰ææ¡ä»¶æ˜¯å·¦å³ä¿©éƒ¨åˆ†å¿…é¡»æœ‰åºã€‚\n1234567891011public void MergeSort(int[] arr, int left, int right)&#123;    if (left &gt;= right)        return;    int mid = left + ((right - left) &gt;&gt; 1);    MergeSort(arr, left, mid);    MergeSort(arr, mid + 1, right);    Merge(arr, left, mid, right);&#125;\nç®—æ³•é¢˜åº”ç”¨\né‚£ä¹ˆï¼Œå¦‚æœä¸€äº›ç®—æ³•é¢˜ä¸­ï¼Œå¦‚æœæ•°ç»„çš„å·¦å³ä¸¤éƒ¨åˆ†å·²ç»æœ‰åºäº†ï¼Œæ˜¯å¦è¿™äº›é¢˜ä¼šæ›´å®¹æ˜“æ‰¾åˆ°è§£æ³•å‘¢ï¼Ÿ\næ•°ç»„ä¸­çš„é€†åºå¯¹ğŸ“\n\nåœ¨æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚æœå‰é¢ä¸€ä¸ªæ•°å­—å¤§äºåé¢çš„æ•°å­—ï¼Œåˆ™è¿™ä¸¤ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªé€†åºå¯¹ã€‚è¾“å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ±‚å‡ºè¿™ä¸ªæ•°ç»„ä¸­çš„é€†åºå¯¹çš„æ€»æ•°ã€‚\n\nç¤ºä¾‹ 1:\nè¾“å…¥: [7,5,6,4]\nè¾“å‡º: 5\n\n\né™åˆ¶ï¼š\n0 &lt;= æ•°ç»„é•¿åº¦ &lt;= 50000\n\n\næˆ‘ä»¬å…ˆæ¥ä¸¤ä¸ªæ•°(å°äºä¸¤ä¸ªæ•°,å°±å¯ä»¥ç›´æ¥è¿”å›0äº†), ä¾‹å¦‚[7, 5]ã€‚å…¶å®ï¼Œä¸€çœ‹å°±çŸ¥é“è¿™æ˜¯ä¸€ç»„é€†åºå¯¹ï¼Œä½†è®©æˆ‘ä»¬ç”¨å½’å¹¶æ’åºçš„æ€æƒ³å°±åˆ†æä¸€ä¸‹ã€‚\n\né¦–å…ˆæ•°ç»„çš„å·¦å³ä¿©éƒ¨åˆ†éƒ½æ˜¯æœ‰åºçš„ï¼Œå› ä¸ºå„è‡ªå°±ä¸€ä¸ªæ•°ã€‚å¯¹äºå³è¾¹5æ¥è¯´ï¼Œåœ¨å·¦è¾¹ä»7åˆ°ä¸­é—´ä½ç½®éƒ½æ¯”5å¤§ã€‚é‚£ä¹ˆä»7åˆ°ä¸­é—´çš„ä½ç½®ï¼Œæ€»å…±æœ‰1ä¸ªæ•°ï¼Œåˆ™æœ‰ä¸€ç»„é€†åºå¯¹ã€‚ä¹‹åå°†[7, 5]æ’åºã€‚\nåŒç†ï¼Œå¯¹äº[6, 4], åˆ†æå®ƒä»¬ä¹Ÿæ˜¯ä¸€ç»„é€†åºå¯¹ã€‚ç„¶åæ’åºã€‚\næ’å®Œåºåï¼Œæ•°ç»„å˜æˆ[5, 7, 4, 6]ã€‚ä»å³è¾¹éƒ¨åˆ†å¼€å§‹çœ‹ï¼Œå¯¹äº4ï¼Œåœ¨å·¦è¾¹éƒ¨åˆ†ï¼Œå› ä¸º5æ¯”4å¤§ï¼Œé‚£ä¹ˆä»5åˆ°ä¸­é—´çš„ä½ç½®ï¼Œéƒ½å¯ä»¥ä¸4ç»„æˆé€†åºå¯¹ï¼Œé‚£ä¹ˆæœ‰ mid + 1 - index ç»„é€†åºå¯¹ï¼Œå³ 1 + 1 - 0 = 2 (è¿™é‡Œå·¦è¾¹éƒ¨åˆ†ä¸ç”¨ä»5å¼€å§‹å‘å³ä¸€ä¸€éå†ä¸4æ¯”è¾ƒï¼Œå› ä¸ºè¿™éƒ¨åˆ†æ˜¯æœ‰åºçš„ï¼Œè‚¯å®šéƒ½ä¸ä¼šå°äº5)ï¼›ä¹‹åçœ‹6ï¼Œå› ä¸ºå·¦è¾¹çš„5å°ï¼Œåˆ™å·¦è¾¹è¾¹å‘å³ç§»åŠ¨åˆ°7ï¼Œå…¶æ¯”6å¤§ï¼Œåˆ™å¯¹äº6æ¥è¯´ï¼Œå³è¾¹æœ‰ 1 + 1 - 1 = 1ä¸ªæ•°å¯ä»¥å®ƒç»„æˆé€†åºå¯¹ã€‚å³è¾¹éƒ¨åˆ†éå†ç»“æŸï¼Œå½’å¹¶æ’åºå°†æ•°ç»„å˜æœ‰åºã€‚\næœ€åï¼Œæˆ‘ä»¬å°±ç»Ÿè®¡å‡ºæ€»å…±æœ‰5ç»„é€†åºå¯¹ã€‚\n\næ³¨æ„ï¼šåœ¨mergeæ’åºåˆ°è¾¾è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªä½ç½®å·¦å³ä¸¤è¾¹çš„å€¼ç›¸ç­‰ï¼Œåº”å…ˆå°†å·¦è¾¹çš„å€¼å…ˆæ”¾å…¥è¾…åŠ©æ•°ç»„ä¸­ã€‚å¦‚æœå…ˆå°†å³è¾¹çš„æ•°æ”¾å…¥è¾…åŠ©æ•°ç»„ä¸­ï¼Œå¯èƒ½ä¼šé€ æˆç»“æœå˜å°ã€‚ä¾‹å¦‚ï¼Œå·¦å³ä¸¤ä¸ªåˆ†åˆ«æ˜¯a, b(a == b)ã€‚å¦‚æœæ­¤æ—¶açš„ä¸‹ä¸€ä½æ˜¯c(c &gt; a)ã€‚å¦‚æœå…ˆæŠŠaæ”¾å…¥è¾…åŠ©æ•°ç»„ï¼Œcè¿˜å¯ä»¥ä¸bç»„æˆé€†åºå¯¹ã€‚ä½†æ˜¯å¦‚æœbå…ˆæ”¾å…¥è¾…åŠ©æ•°ç»„ï¼Œé‚£ä¹ˆcå°±ä¸èƒ½ä¸bç»„æˆé€†åºå¯¹ï¼Œå¯¼è‡´ç»“æœå˜å°ã€‚\n\n1234567891011121314151617181920212223242526272829303132333435363738394041public int ReversePairs(int[] nums) &#123;    if(nums == null || nums.Length &lt; 2)        return 0;    return ReversePairs(nums, 0, nums.Length - 1);&#125;private int ReversePairs(int[] nums, int le, int ri)&#123;    if(le == ri)        return 0;    int mid = le + ((ri - le) &gt;&gt; 1);    return ReversePairs(nums, le, mid)         + ReversePairs(nums, mid + 1, ri)         + Merge(nums, le, mid, ri);        &#125;private int Merge(int[] nums, int le, int mid, int ri)&#123;    int[] aux = new int[ri - le + 1];    int i = 0; // è¾…åŠ©æ•°ç»„ä¸­å½“å‰ä½ç½®    int l = le, r = mid + 1; //numsæ•°ç»„ä¸­å·¦å³ä½ç½®    int res = 0;    while(l &lt;= mid &amp;&amp; r &lt;= ri)     &#123;        // å¦‚æœå·¦è¾¹lçš„å€¼æ¯”å³è¾¹rçš„å€¼å¤§ï¼Œé‚£ä¹ˆ[l..mid]ä¹‹é—´æ‰€æœ‰çš„æ•°éƒ½æ¯”rä½ç½®çš„æ•°å¤§        // é‚£ä¹ˆå·¦è¾¹å°±æœ‰mid - l + 1ä¸ªæ•°å¯ä»¥ä¸rç»„æˆé€†åºå¯¹        res += nums[l] &gt; nums[r] ? (mid - l + 1) : 0;         aux[i++] = nums[l] &lt;= nums[r] ? nums[l++] : nums[r++];    &#125;    while(l &lt;= mid)        aux[i++] = nums[l++];    while(r &lt;= ri)        aux[i++] = nums[r++];    for(i = 0; i &lt; aux.Length; i++)        nums[le + i] = aux[i];    return res;&#125;\nè®¡ç®—å³ä¾§å°äºå½“å‰å…ƒç´ çš„ä¸ªæ•°ğŸ“\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„numsï¼ŒæŒ‰è¦æ±‚è¿”å›ä¸€ä¸ªæ–°æ•°ç»„countsã€‚æ•°ç»„countsæœ‰è¯¥æ€§è´¨ï¼šcounts[i]çš„å€¼æ˜¯nums[i]å³ä¾§å°äºnums[i]çš„å…ƒç´ çš„æ•°é‡ã€‚\nç¤ºä¾‹ 1ï¼š\n\nè¾“å…¥ï¼šnums = [5, 2, 6, 1]\nè¾“å‡ºï¼š[2, 1, 1, 0]\nè§£é‡Šï¼š\n5 çš„å³ä¾§æœ‰ 2 ä¸ªæ›´å°çš„å…ƒç´  (2 å’Œ 1)\n2 çš„å³ä¾§ä»…æœ‰ 1 ä¸ªæ›´å°çš„å…ƒç´  (1)\n6 çš„å³ä¾§æœ‰ 1 ä¸ªæ›´å°çš„å…ƒç´  (1)\n1 çš„å³ä¾§æœ‰ 0 ä¸ªæ›´å°çš„å…ƒç´ \n\n\n\næˆ‘ä»¬è¿˜æ˜¯ä»å°èŒƒå›´çœ‹èµ·ï¼Œå…ˆçœ‹[5, 2]ã€‚é¦–å…ˆå·¦å³ä¿©è¾¹éƒ½æ˜¯æœ‰åºçš„ï¼Œå› ä¸ºå„è‡ªå°±ä¸€ä¸ªæ•°ã€‚å¯¹äºå·¦è¾¹çš„5ï¼Œå³è¾¹çš„2æ¯”å…¶å°ã€‚æ‰€ä»¥ç›®å‰5å³ä¾§æ¯”å…¶å°çš„æ•°é‡æ˜¯1ã€‚2å³è¾¹ç›®å‰æ²¡æ•°ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯0ã€‚å¾—åˆ°ç›®å‰ç­”æ¡ˆåï¼Œæ’åºã€‚\nåŒç†ï¼Œå¯¹äºæ•°ç»„[6, 1], 6å³è¾¹çš„1æ¯”å…¶å°ï¼Œç›®å‰ç­”æ¡ˆæ˜¯1ã€‚1å³è¾¹æ²¡æ•°ï¼Œç­”æ¡ˆæ˜¯0ã€‚å¾—åˆ°ç›®å‰ç­”æ¡ˆï¼Œæ’åºã€‚\nä¸Šé¢å·¦å³éƒ¨åˆ†æ’å®Œåºä¹‹åæ•°ç»„æ˜¯[2, 5, 1, 6]ã€‚æ­¤æ—¶è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆl, råˆ†åˆ«æŒ‡å‘å·¦è¾¹çš„5å’Œå³è¾¹çš„6ã€‚æ­¤æ—¶5&lt;6, rå‘å·¦ç§»åŠ¨åˆ°1ï¼Œæ­¤æ—¶ 5&gt;1, é‚£ä¹ˆæ­¤æ—¶[mid + 1, r]ä¹‹é—´çš„æ‰€æœ‰æ•°éƒ½æ˜¯å°äº5ï¼Œæ»¡è¶³è¦æ±‚çš„ï¼Œå³æ€»å…±æœ‰ r - mid (2 - 1 = 1)ä¸ªï¼ŒåŠ ä¸Šä¹‹å‰çš„1ä¸ªï¼Œ5å³è¾¹æ»¡è¶³è¦æ±‚çš„æ•°é‡æ˜¯2ä¸ªã€‚ä¹‹åï¼Œlå‘å·¦ç§»åŠ¨åˆ°2ï¼Œæ­¤æ—¶ 2&gt;1, æ»¡è¶³è¦æ±‚ï¼Œé‚£ä¹ˆ2å³è¾¹æœ‰1ä¸ªæ•°æ»¡è¶³è¦æ±‚ã€‚lç»§ç»­å·¦ç§»ï¼Œè¶…å‡ºæ•°ç»„è¾¹ç•Œç»“æŸã€‚\nè‡³æ­¤ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°æ•°ç»„[5, 2, 6, 1]çš„ç­”æ¡ˆ[2, 1, 1, 0]ã€‚\nä½†æ˜¯ï¼Œå¦‚ä½•æŠŠç­”æ¡ˆå¡«å…¥è¿”å›æ•°ç»„å¯¹åº”ä½ç½®ä¸Šå‘¢ï¼Ÿå› ä¸ºæ•°ç»„numsæ˜¯è¢«æ’åºçš„ï¼Œæ¯ä¸ªå€¼éƒ½å¯èƒ½ä¼šè¢«ç§»åŠ¨çš„ã€‚å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”¨ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¸ä½†æœ‰åŸæ•°ç»„çš„å…ƒç´ çš„å€¼ï¼Œè¿˜æºå¸¦å…ƒç´ çš„ä¸‹æ ‡ï¼Œè¿™æ ·åœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å§‹ç»ˆå¯ä»¥è·å–å…ƒç´ çš„åŸæ¥ä¸‹æ ‡ï¼Œå¹¶å°†ç­”æ¡ˆæ›´æ–°åˆ°è¿”å›æ•°ç»„ä¸­ã€‚(è¿™é‡Œæˆ‘æ‡’å¾—ä½¿ç”¨æ•°ç»„æˆ–åˆ›å»ºä¸€ä¸ªå¯¹è±¡å»åŒ…å«å…ƒç´ çš„å€¼å’Œä¸‹æ ‡ï¼Œç›´æ¥ä½¿ç”¨çš„C#ä¸­çš„å…ƒç»„äº†)\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class Solution &#123;    private int[] smaller;    public IList&lt;int&gt; CountSmaller(int[] nums)     &#123;        if(nums == null || nums.Length == 0)            return new List&lt;int&gt;();        smaller = new int[nums.Length];        (int, int)[] keyNums = new (int, int)[nums.Length]; //å…ƒç»„æ•°ç»„        for(int i = 0; i &lt; nums.Length; i++)            keyNums[i] = (nums[i], i); // åˆå§‹åŒ–å…ƒç»„ï¼Œç¬¬ä¸€ä¸ªæ˜¯å…ƒç´ çš„å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸‹æ ‡        CountSmaller(keyNums, 0, nums.Length - 1);        return new List&lt;int&gt;(smaller);    &#125;    private void CountSmaller((int, int)[] keyNums, int le, int ri)    &#123;        if(le == ri)            return;                int mid = le + ((ri - le) &gt;&gt; 1);        CountSmaller(keyNums, le, mid);        CountSmaller(keyNums, mid + 1, ri);        Merge(keyNums, le, mid, ri);    &#125;    private void Merge((int, int)[] keyNums, int le, int mid, int ri)    &#123;        int l = mid, r = ri;        while(l &gt;= le &amp;&amp; r &gt; mid)        &#123;            // å¦‚æœnums[l] &lt;= nums[r]ï¼Œä¸æ»¡è¶³æ¡ä»¶ï¼Œrå‘å·¦ç§»åŠ¨            if(keyNums[l].Item1 &lt;= keyNums[r].Item1)                r--;            else            &#123;                // å¦åˆ™ï¼Œ[mid + 1ï¼Œ r]ä¹‹é—´çš„æ•°éƒ½æ»¡è¶³è¦æ±‚ï¼Œæ›´æ–°ç»“æœã€‚lå‘å·¦ç§»ã€‚                smaller[keyNums[l].Item2] += r - mid;                l--;            &#125;        &#125;        (int, int)[] aux = new (int, int)[ri - le + 1];        int i = 0;        l = le;        r = mid + 1;        while(l &lt;= mid &amp;&amp; r &lt;= ri)            aux[i++] = keyNums[l].Item1 &lt;= keyNums[r].Item1 ? keyNums[l++] : keyNums[r++];        while(l &lt;= mid)            aux[i++] = keyNums[l++];        while(r &lt;= ri)            aux[i++] = keyNums[r++];                for(i = 0; i &lt; aux.Length; i++)            keyNums[i + le] = aux[i];    &#125;&#125;\nä¸‹é¢ä¸¤é¢˜çš„åˆ†æé€»è¾‘åŸºæœ¬ä¸Šå·®ä¸å¤šï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è§£ç­”ä¸€ä¸‹\nç¿»è½¬å¯¹ğŸ“\nåŒºé—´å’Œçš„ä¸ªæ•°ğŸ“\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/mohammad-alizade-CDu0x1Aiils-unsplash.jpg","plink":"http://b.alphac.cn/2022/09/15/merge-in-algorithm-problems/"},{"title":"Hello World","date":"2022-09-15T12:52:56.372Z","date_formatted":{"ll":"2022å¹´9æœˆ15æ—¥","L":"2022/09/15","MM-DD":"09-15"},"updated":"2022-09-15T04:52:56.372Z","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick Start\nCreate a new post\n1$ hexo new &quot;My New Post&quot;\nMore info: Writing\nRun server\n1$ hexo server\nMore info: Server\nGenerate static files\n1$ hexo generate\nMore info: Generating\nDeploy to remote sites\n1$ hexo deploy\nMore info: Deployment\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/photo-1517694712202-14dd9538aa97.jpg","plink":"http://b.alphac.cn/2022/09/15/hello-world/"},{"title":"Call External APIs within Power Apps Portal","date":"2022-09-15T12:52:56.371Z","date_formatted":{"ll":"2022å¹´9æœˆ15æ—¥","L":"2022/09/15","MM-DD":"09-15"},"updated":"2022-09-15T06:41:31.748Z","content":"Think about this common scenario: You have a Power Apps Portal and want authenticated portal users to call some external APIs to retrieve/update data from outside instead of from the binding Dataverse instance. Previously, I would say there were lots of problems: how to make sure the APIs could be only called by authenticated users? How to secure the requests? How to fix CORS (Cross Origin Resource Sharing) issues? Now, it becomes easier, because Portal has OAuth 2.0 implicit grant flow feature and easily to integrate with Azure API Management service. Here I will do it step by step.\n1. Register an App on Azure\nCreate a App Registration on the Azure AD which under the same tenant where the Portal is hosted, then copy the Application ID.\n\nWhen a Power Apps Portal provisioned, there will be App Registration created. Itâ€™s OK to use this one if you donâ€™t want to create new one.\n\n\n2. Create Site Settings\nNow we need to register client id with the portal for which the implicit grant flow is allowed. Go to the binding Dataverse environment, open the Portal Management app and create two Site Settings.\n\na. ImplicitGrantFlow/RegisteredClientId â€“ The value is the copied Application ID.\nb. ImplicitGrantFlow/{ClientId}/RedirectUri â€“ The {ClientId} is the copied Application ID. The value is the valid redirect URIs that are allowed for a specific client ID.\nref: https://docs.microsoft.com/en-us/powerapps/maker/portals/oauth-implicit-grant-flow#register-client-id-for-implicit-grant-flow\n\n3. Get Authentication Token\nNow if you sign in the Portal and access URL PortalURL/_services/auth/token?client_id=&#123;clientid&#125;, you will get a JWT (JSON Web Token).\nGo to jwt.io to decode the token, you can see the details the token carried. Please copy values of attributes aud (audience) and iss (issuer), we will use it later. Actually, the aud is application id and the iss is the portal url.\n4. Create an API on APIM\n\n(skip if you already have one)\n\nPlease follow this tutorial to create an API on APIM. It doesnâ€™t require that APIM service should be in the same tenant as the portal.\n5. Validate JWT token config\nIn order to make sure the API can be called with the token from Portal, APIM provides you with &lt;validate-jwt&gt; policy that takes off majority of the effort related to JWT token validation.\nGo to the APIM and open the â€˜Police code editorâ€™ for the â€˜Inbound processingâ€™ of the API, and add the policy under &lt;inbound&gt; tag.\n 1234567891011 &lt;validate-jwt header-name=&quot;Authorization&quot; failed-validation-httpcode=&quot;401&quot; failed-validation-error-message=&quot;Unauthorized&quot; require-scheme=&quot;Bearer&quot; output-token-variable-name=&quot;securityToken&quot;&gt;    &lt;issuer-signing-keys&gt;        &lt;key n=&quot;&#123;modulus goes here&#125;&quot; e=&quot;&#123;exponent goes here&#125;&quot; /&gt;    &lt;/issuer-signing-keys&gt;    &lt;audiences&gt;        &lt;audience&gt;&#123;Application(Client) ID&#125;&lt;/audience&gt;    &lt;/audiences&gt;    &lt;issuers&gt;        &lt;issuer&gt;&#123;Portal URL, eg: xxx.powerappsportal.com&#125;&lt;/issuer&gt;    &lt;/issuers&gt;&lt;/validate-jwt&gt;\nNow we have a problem how to set the key. To get the key, please open PortalURL/_services/auth/publickey, copy the whole text and paste it to the key_encoded, then run the python code to get Modulus and Exponent and set them to the keyâ€™s attributes.\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# Ensure the libraries below# pip install cryptography# pip install pycryptodomefrom Crypto.PublicKey import RSAimport base64from binascii import unhexlifyimport sysdef long_to_bytes (val):    &quot;&quot;&quot;    Use :ref:`string formatting` and :func:`~binascii.unhexlify` to    convert ``val``, a :func:`long`, to a byte :func:`str`.    :param long val: The value to pack    Using :ref:`string formatting` lets us use Python&#x27;s C innards.    &quot;&quot;&quot;    # one (1) hex digit per four (4) bits    width = val.bit_length()    # unhexlify wants an even multiple of eight (8) bits, but we don&#x27;t    # want more digits than we need (hence the ternary-ish &#x27;or&#x27;)    width += 8 - ((width % 8) or 8)    # format width specifier: four (4) bits per hex digit    fmt = &#x27;%%0%dx&#x27; % (width // 4)    # prepend zero (0) to the width, to zero-pad the output    s = unhexlify(fmt % val)    return skey_encoded = &quot;&quot;&quot;-----BEGIN PUBLIC KEY-----MI*************************************************************Gjn*************************************************************4hY*************************************************************2PG*************************************************************+tj*************************************************************KuG*************************************************************tqw*****B-----END PUBLIC KEY-----&quot;&quot;&quot;pubkey = RSA.importKey(key_encoded)print(&quot;Modulus:&quot;)print(base64.b64encode(long_to_bytes(pubkey.n)).decode() + &#x27;\\n&#x27;)print(&quot;Exponent:&quot;)print(base64.b64encode(long_to_bytes(pubkey.e)).decode())\nref: https://psempruch.medium.com/authorizing-powerapps-portal-calls-with-azure-api-management-8880c0bbd64d\n6. Fix CORS.\nAs the API is in a different domain, so if we try to call it from Portal website with JavaScript code, it will encounter the CORS issue. To fix it, please add a CORS policy to the APIâ€™s inbound policy. You can specify which origins, methods, etc are allowed to call the APIs. Here, I will set them to * to allow all.\n\nMake sure the &lt;base /&gt; is moved to the bottom of the Inbound.\n\n1234567891011121314151617181920&lt;inbound&gt;    &lt;validate-jwt &gt;    â€¦    &lt;/validate-jwt&gt;    &lt;cors&gt;        &lt;allowed-origins&gt;            &lt;origin&gt;*&lt;/origin&gt;        &lt;/allowed-origins&gt;        &lt;allowed-methods&gt;            &lt;method&gt;*&lt;/method&gt;        &lt;/allowed-methods&gt;        &lt;allowed-headers&gt;            &lt;header&gt;*&lt;/header&gt;        &lt;/allowed-headers&gt;            &lt;expose-headers&gt;            &lt;header&gt;*&lt;/header&gt;        &lt;/expose-headers&gt;    &lt;/cors&gt;    &lt;base /&gt;&lt;/inbound&gt;\n7. Remove Subscription requirement\nIf you donâ€™t want each API call needs to carry a subscript id in the header, please turn off the Subscription required.\n\n8. Test.\nNow everything is settle down, we are able to try to call the API in Portal with JavaScript code.\n\na. Create a Web Template and add JavaScript code to get token, then all the API. In order to make it simple, letâ€™s use the sample code with little updates in the template source.\nref: https://docs.microsoft.com/en-us/powerapps/maker/portals/oauth-implicit-grant-flow#token-endpoint-sample\n\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495&lt;div id=&#x27;response&#x27;&gt;&lt;/div&gt;&lt;script&gt;/*    Portals - Implicit Grant Sample       Token Endpoint    Description:        * getAuthenticationToken function is used to fetch an ID token using the Token endpoint in Portals.        * getAuthenticationToken is added to window.auth using an IIFE.        * After the IIFE gets executed, the token can be fetched anytime using window.auth.getAuthenticationToken(callback);        * getAuthenticationToken accepts a callback function to handle the token returned from Portals.        * Token is returned only for authenticated users.        * ImplicitGrantForceLogin cookie key is used to decide whether or not to redirect user to login page based on the Token endpoint&#x27;s response.*/// Part 1: Add getAuthenticationToken to window.auth(function (auth, $) &#123;    &quot;use strict&quot;;    var callback = null    //Force Login for Anonymous users. Below line can be commented if force login is not needed.    //$.cookie(&quot;ImplicitGrantForceLogin&quot;, 1);      let clientId = &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;; //Add the Client ID registered on CRM.    auth.getAuthenticationToken = function (callbackFn) &#123;        callback = callbackFn;               $.ajax(&#123;            type: &#x27;GET&#x27;,            url: `/_services/auth/token?client_id=$&#123;clientId&#125;`,            cache: false,            success: handleGetAuthenticationTokenSuccess,            error: jqXHR =&gt; callback(null, jqXHR)        &#125;);    &#125;    function handleGetAuthenticationTokenSuccess(data, status, jqXHR) &#123;        var jsonResult = JSON.parse(jqXHR.getResponseHeader(&#x27;X-Responded-JSON&#x27;));        if (jsonResult &amp;&amp; jsonResult.status == 401) &#123;            var forceLogin = Number($.cookie(&quot;ImplicitGrantForceLogin&quot;)) === 1;            if (forceLogin) &#123;                // If the user is not logged in, redirect to login page                redirectToLogin();            &#125; else &#123;                callback(null,jsonResult); //Run callback method with error message            &#125;        &#125; else &#123;            // Pass the token to the callback function            callback(data);        &#125;    &#125;    function redirectToLogin() &#123;        var redirectUrl = window.location;        var loginUrl = window.location.origin + &#x27;/SignIn?returnUrl=&#x27; + encodeURIComponent(redirectUrl);        window.location = loginUrl;    &#125;&#125;(window.auth || (window.auth = &#123;&#125;), window.jQuery));// Part 2: Define Callback function and call window.auth.getAuthenticationToken to fetch the token.var callbackFn = function(data, err) &#123;    if(data) &#123;        $.ajax(&#123;            url: &#x27;https://xxxx.azure-api.net/sessions&#x27;, // The API hosted on APIM            type: &#x27;GET&#x27;,            headers: &#123;                &#x27;Authorization&#x27;: `Bearer $&#123;data&#125;` // The token from /_services/auth/token?client_id=$&#123;clientId&#125;            &#125;,            success: function (result) &#123;               $(&quot;#response&quot;).text(JSON.stringify(result)); // The returned data.            &#125;,            error: function (error) &#123;                $(&quot;#response&quot;).text(error.statusText);            &#125;        &#125;);    &#125;    else &#123;        console.log(&quot;Error&quot;);        if(err)&#123;            // 401 is returned for anonymous users.            if(err.status == 401)&#123;                console.log(&quot;Login required&quot;);            &#125;            // To handle any other error            else&#123;                console.log(err.responseJSON.ErrorId + &quot; : &quot; + err.responseJSON.ErrorMessage);            &#125;        &#125;    &#125;&#125; // Fetch Token Callwindow.auth.getAuthenticationToken(callbackFn);&lt;/script&gt;\n\nb. Create a Page Template for the above Web Template, then create a Web Page for the Page Template.\nc. At last, try to open the Web Page from Portal website. Without login, nothing will be returned. After login, the data will display on Portal directly.\n\n\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/photo-1578503995198-743266f741c5.jpg","plink":"http://b.alphac.cn/2022/09/15/call-external-apis-within-power-apps-portals/"},{"title":"Manacherç®—æ³•åŠåº”ç”¨","date":"2022-01-04T22:13:25.000Z","date_formatted":{"ll":"2022å¹´1æœˆ4æ—¥","L":"2022/01/04","MM-DD":"01-04"},"updated":"2022-09-15T04:52:56.374Z","content":"å›æ–‡ä¸²(palindrome string)æ˜¯ç®—æ³•é¢˜ä¸­æ¯”è¾ƒå¸¸è§çš„ç±»å‹ã€‚æ ¹æ®å›æ–‡çš„å®šä¹‰æˆ‘ä»¬çŸ¥é“å®ƒæ˜¯è½´å¯¹ç§°çš„ï¼Œæ‰€ä»¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯å›æ–‡å¾ˆå®¹æ˜“ï¼Œæˆ‘ä»¬åªéœ€è¦ä»å­—ç¬¦ä¸²çš„ä¸¤å¤´å‘ä¸­é—´éå†ï¼Œåªæœ‰ä¸¤ä¾§ä¸€ç›´ç›¸ç­‰æ‰æ˜¯å›æ–‡ï¼Œå“ªæ€•ä¸€æ¬¡ä¸¤ä¾§ä¸ç›¸ç­‰éƒ½ä¸æ˜¯å›æ–‡ã€‚\nä¸­å¿ƒæ‰©å±•\né‚£æ€ä¹ˆåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ‰¾å‡ºå…¶ä¸­çš„å›æ–‡å­ä¸²å‘¢ï¼Ÿè²Œä¼¼ä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¯ä¸ªå­—ç¬¦ä¸Šå‘ä¸¤ä¾§æ‰©å±•ï¼Œç›´åˆ°ä¸¤ä¾§ä¸ç›¸ç­‰å°±åœä¸‹æ¥ï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå›æ–‡å­ä¸²äº†ã€‚è¿™ä¸ªæ–¹å¼æ²¡é”™ï¼Œä½†æ˜¯ä¼šæœ‰é—æ¼ã€‚å› ä¸ºå›æ–‡ä¸²çš„ä¸­è½´å¯èƒ½æ˜¯æŸä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯èƒ½åœ¨ä¸¤ä¸ªå­—ç¬¦ä¸­é—´ã€‚ä¾‹å¦‚ï¼šâ€œaba&quot;å°±æ˜¯ä»¥â€™bâ€™ä½ä¸­è½´çš„å›æ–‡ä¸²ï¼›è€Œ&quot;abba&quot;å´æ˜¯ä»¥&quot;bb&quot;ä¸­é—´ä¸ºè½´çš„å›æ–‡ï¼Œè¿™æ ·çš„ä¸­è½´æ˜¯è™šè½´ã€‚\nè¿™æ ·è™šä¸­è½´çš„å›æ–‡å­ä¸²åº”è¯¥æ€ä¹ˆæ‰¾å‘¢ï¼Ÿå…¶å®æ ¹ä¸Šé¢åŸç†ä¸€æ ·ï¼Œåªæ˜¯éœ€è¦æŠŠä¸­è½´ç”±è™šå˜å®ã€‚æˆ‘ä»¬æŠŠæ‰€æœ‰å­—ç¬¦ä¸­é—´æ’å…¥ä¸€ä¸ªåŒæ ·çš„å ä½ç¬¦(åŒ…æ‹¬å·¦å³ä¸¤ä¾§)ï¼Œæ¯”å¦‚ç”¨â€™#'ï¼Œåˆ™&quot;abba&quot;å°±å˜äº†æˆâ€#a#b#b#a#&quot;ï¼Œé‚£ä¹ˆä»¥æœ€ä¸­é—´çš„â€™#'ä¸ºä¸­è½´ï¼Œå°±å¯ä»¥æ‰¾å‡ºå®ƒæ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚\n\næ­¤æ—¶ä½ ä¼šå‘ç°&quot;abba&quot;çš„é•¿åº¦æ˜¯4ï¼Œè€Œ&quot;#a#b#b#a#â€œçš„é•¿åº¦æ˜¯9ï¼Œé‚£ä¹ˆæˆ‘åªéœ€ç»Ÿè®¡â€#a#b#b#a#&quot;åŠå¾„ï¼Œå°±å¯ä»¥sç®—å‡º&quot;abba&quot;çœŸå®çš„é•¿åº¦ã€‚ä¾‹å¦‚ä»¥ä¸­é—´â€™#'å‘å·¦å³ä¸¤è¾¹çš„è·ç¦»éƒ½æ˜¯5ï¼Œé‚£ä¹ˆå†å‡ä¸€å°±æ˜¯çœŸå®é•¿åº¦4ã€‚\nåŒæ ·å¯¹äº&quot;aba&quot;, åŠ å…¥å ä½ç¬¦åä¸º&quot;#a#b#a#&quot;ï¼Œä¸­é—´â€™bâ€™åˆ°å·¦å³ä¸¤è¾¹çš„è·ç¦»éƒ½æ˜¯4ï¼Œå†å‡ä¸€å°±æ˜¯çœŸå®é•¿åº¦3ã€‚\n\nManacherç®—æ³•\nå¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•æ‰¾å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å›æ–‡å­ä¸²ï¼Œä½†æ˜¯ä¹‹å‰çš„æ–¹å¼å¥½åƒè¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Ÿæˆ‘ä»¬éœ€è¦åœ¨å­—ç¬¦ä¸²çš„æ¯ä¸ªä½ç½®åœä¸‹æ¥ï¼Œç„¶åå‘ä¸¤è¾¹æ‰©å±•ï¼Œæ‰¾å‡ºä»¥æ­¤å­—ç¬¦ä¸ºä¸­è½´çš„å›æ–‡å­ä¸²ï¼Œé‚£ä¹ˆæœ€åçš„æƒ…å†µæ˜¯ä»¥å­—ç¬¦ä¸²çš„ä¸­é—´å­—ç¬¦ä¸ºä¸­è½´ä¸€ç›´æ‰©å±•åˆ°ä¸¤è¾¹ï¼Œæ‰©å±•å°±è¦èŠ±è´¹O(n)çš„æ—¶é—´ï¼ŒåŠ ä¸Šéå†å­—ç¬¦ä¸²çš„æ—¶é—´ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹å¼çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(nÂ²)ã€‚\nå¦‚ä½•æ‰èƒ½é™ä½å…¶æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ç§æƒ…å†µï¼š\n\nå‡è®¾åœ¨æŸä¸ªæ—¶åˆ»éå†åˆ°içš„ä½ç½®ï¼Œcæ˜¯iä¹‹å‰çš„æŸä¸ªä½ç½®ï¼Œåœ¨cä½ç½®å‘ç°çš„å›æ–‡ä¸²çš„å³è¾¹ç•Œæœ€è¿œï¼Œå‡è®¾ä¸ºRï¼Œå¯¹ç§°çš„å·¦è¾¹ç•Œæ˜¯Lã€‚å‡è®¾i'æ˜¯iä»¥cä¸ºä¸­å¿ƒçš„å¯¹ç§°ä½ç½®ã€‚å› ä¸ºå·²ç»éå†åˆ°iä½ç½®äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è‚¯å®šç›´åˆ°i'å’Œcä½ç½®å›æ–‡å­ä¸²çš„æƒ…å†µã€‚i'çš„å›æ–‡å­ä¸²é•¿åº¦ä¸ºDi'ï¼Œiçš„å›æ–‡å­ä¸²çš„é•¿åº¦æ˜¯Diã€‚\n\n\nå¦‚æœi'çš„å›æ–‡å­ä¸²åœ¨[L...R]å†…ï¼Œé‚£ä¹ˆDiå’ŒDi'ä¼šæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ\n\nDiå’ŒDi'è‚¯å®šæ˜¯ç›¸ç­‰çš„ï¼Œå¹¶ä¸”i å’Œi'çš„å›æ–‡å­ä¸²è‚¯å®šä¹Ÿæ˜¯ä»¥cä¸ºä¸­å¿ƒè½´å¯¹ç§°çš„ã€‚å› ä¸º[L...R]å†…çš„å­—ç¬¦éƒ½æ˜¯ä»¥cä¸ºä¸­å¿ƒçš„è½´å¯¹ç§°ï¼Œi å’Œi'æ˜¯ä»¥cä¸ºä¸­å¿ƒçš„å¯¹ç§°ï¼Œé‚£ä¹ˆå®ƒä¿©å„è‡ªçš„å›æ–‡å­ä¸²ä¹Ÿä¸ä¾‹å¤–ã€‚ä¾‹å¦‚:\n\n\n\nå¦‚æœi'çš„å›æ–‡å­ä¸²å·¦ä¾§ä¸€éƒ¨åˆ†åœ¨[L...R]å¤–å‘¢ï¼Ÿ\n\n\næ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œå› ä¸ºè½´å¯¹ç§°ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥ç¡®è®¤[L ... i' + i' - L]ä¸[i - (R - i) ... R]éƒ¨åˆ†åº”è¯¥æ˜¯è½´å¯¹ç§°ï¼Œæ‰€ä»¥ç›¸ç­‰çš„ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰å¯èƒ½R + 1ä¸L - 1ä½ç½®çš„å­—ç¬¦ç›¸ç­‰å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯æ²¡æœ‰å¯èƒ½ã€‚å› ä¸ºR + 1ä¸L - 1ä½ç½®æ˜¯ä»¥cä¸ºä¸­å¿ƒå †æˆï¼Œå¦‚æœR + 1ä¸L - 1ä½ç½®å­—ç¬¦ç›¸åŒï¼Œé‚£ä¹ˆä»¥cä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²åº”è¯¥æ˜¯[L-1 ... R + 1]ã€‚\né‚£ä¹ˆæœ‰æ²¡æœ‰å¯èƒ½[i - (R - i) ... R] å·¦å³å¤–ä¾§ï¼ˆå³i - (R - i) -1ä¸R + 1ï¼‰çš„å­—ç¬¦å¯¹ç§°ç›¸ç­‰å‘¢ï¼Ÿ\nä¹Ÿæ˜¯ä¸å¯èƒ½ã€‚å¦‚æœç›¸ç­‰ï¼Œå› ä¸ºcä¸ºä¸­å¿ƒå¯¹ç§°ï¼Œé‚£ä¹ˆi - (R - i) -1ä¸i' + i' - L + 1æ˜¯ç›¸ç­‰çš„ã€‚åˆç”±äºi'çš„å›æ–‡å­ä¸²ï¼ŒL - 1ä¸i' + i' - L + 1ç›¸ç­‰ï¼Œé‚£ä¹ˆL - 1ä¸i - (R - i) -1ç›¸ç­‰ï¼Œé‚£ä¹ˆä¸R + 1ä¹Ÿç›¸ç­‰äº†ï¼Œé‚£ä¹ˆä»¥cä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²åˆæ˜¯[L-1 ... R + 1]äº†ã€‚\næ‰€ä»¥ä»¥iä¸ºä¸­å¿ƒçš„å›æ–‡å­ä¸²æ˜¯[i - (R - i) ... R]ã€‚ä¾‹å¦‚ï¼š\n\n\n\n\nå¦‚æœi'çš„å›æ–‡å­ä¸²å·¦è¾¹ç•Œæ­£å¥½åœ¨Lä¸Šå‘¢ï¼Ÿ\n\næ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç¡®è®¤ä»¥i' çš„å›æ–‡å­ä¸²çš„èŒƒå›´æ˜¯[L ... i' + i' - L]ã€‚ä¸ä¹‹å¯¹åº”ï¼Œ[i - (R - i) ... R]éƒ¨åˆ†æ»¡è¶³ä»¥iä¸ºä¸­å¿ƒçš„å›æ–‡å­ä¸²ã€‚é‚£æ­¤å¤„çš„å›æ–‡å­—ç¬¦ä¸²ä¼šä¸ä¼šæ›´å®½å‘¢ï¼Ÿ\nè¿™ä¸ªæ˜¯æœ‰å¯èƒ½çš„ã€‚å› ä¸ºR + 1ä¸i - (R - i) -1ç›¸ç­‰ï¼Œi - (R - i) -1ä¸i' + i' - L + 1ç›¸ç­‰ï¼Œé‚£ä¹ˆR + 1ä¸i' + i' - L + 1ç›¸ç­‰ã€‚ä½†æ˜¯i' + i' - L + 1ä¸L - 1ä½ç½®å­—ç¬¦ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥R + 1ä¸L - 1ä¸ç›¸ç­‰ï¼Œä¸å½±å“ä¹‹å‰çš„å‡è®¾ã€‚æ‰€ä»¥åœ¨æ­¤ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å°è¯•å†å‘ä¸¤è¾¹æ‰©å±•ã€‚ä½†æ˜¯[i - (R - i) ... R]ä¸éœ€è¦åœ¨è®¡ç®—çš„ï¼Œè¿™éƒ¨åˆ†å·²ç»æ»¡è¶³è¦æ±‚äº†ã€‚ä¾‹å¦‚ï¼š\n\n\n\nä½†æ˜¯æ²¡æœ‰ä¹‹å‰çš„å‡è®¾æƒ…å†µæ€ä¹ˆåŠï¼Ÿiåœ¨Rçš„å³ç«¯æ€ä¹ˆåŠå‘¢ï¼Ÿå›åˆ°åŸæ¥æœ´ç´ çš„æ–¹å¼å»æŸ¥æ‰¾å›æ–‡å­ä¸²ï¼Œç„¶åå°†æ­¤æ—¶çš„iè®¾ä¸ºcï¼Œå®ƒçš„å³è¾¹ç•Œè®¾ä¸ºR, iè·³åˆ°ä¸‹ä¸€æ­¥ï¼Œçœ‹çœ‹æ˜¯å¦æ»¡è¶³ä¸Šé¢çš„æ¡ä»¶ï¼Œæ»¡è¶³åˆ™ä»¥ä¸Šé¢çš„æƒ…å†µæŸ¥æ‰¾ï¼Œä¸æ»¡è¶³ï¼Œç»§ç»­æ­¤æœ´ç´ æŸ¥æ‰¾ã€‚\n\n\nä»£ç \næˆ‘ä»¬å°†ä¸Šè¿°ä¸¤ç‚¹èåˆåœ¨ç®—æ³•ä¸­.\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// è®¡ç®—å­—ç¬¦ä¸²ä¸­æœ€é•¿çš„å›æ–‡å­—ä¸²çš„é•¿åº¦public int MaxLCPSLength(string str)&#123;    if (str == null || str.Length == 0)        return 0;    char[] manacherStr = ManacherChars(str);    int[] diameters = new int[manacherStr.Length]; // ä»¥æ¯ä¸ªå­—ç¬¦ä¸ºä¸­å¿ƒçš„å›æ–‡å­—ä¸²çš„é•¿åº¦    int center = -1; // å½“å‰åˆ°è¾¾æœ€å³è¾¹ç•Œå›æ–‡å­ä¸²çš„ä¸­å¿ƒä¸‹æ ‡    int right_border = -1; // å½“å‰æœ€å³å›æ–‡å­ä¸²å³è¾¹ç•Œä¸‹æ ‡    int maxLen = int.MinValue; // è®°å½•æœ€é•¿å›æ–‡å­ä¸²çš„é•¿åº¦    for (int i = 0; i &lt; manacherStr.Length; i++)    &#123;        // å¦‚æœ i å¤§äºç­‰äºå³è¾¹ç•Œ, åˆ™ i ä½ç½®ä¸­å¿ƒå­ä¸²çš„é»˜è®¤é•¿åº¦ä¸º1. ä¹‹åéœ€è¦ä¸¤è¾¹æ‰©å±•.        // å¦‚æœ i åœ¨å³è¾¹ç•Œå·¦ä¾§, åˆ™å…ˆç®— i&#x27; ä½ç½®å­ä¸²é•¿åº¦:        // - å¦‚æœåœ¨[L..R]å†…, é‚£ä¹ˆ i&#x27; ä½ç½®å­ä¸²é•¿åº¦è‚¯å®šå°äº right_border - i        // - å¦åˆ™, i&#x27; ä½ç½®å­ä¸²é•¿åº¦è‚¯å®šä¸å°äº right_border - i.        diameters[i] = right_border &gt; i ? Math.Min(right_border - i, diameters[2 * center - i]) : 1;        // ä¸ºäº†å‡å°‘ä»£ç é‡, ä¸ç®¡ i ä½ç½®å­ä¸²é•¿åº¦å¦‚ä½•, éƒ½å°è¯•å»ä¸¤è¾¹æ‰©å±•. å¦‚æœç¬¬ä¸€æ¬¡æ‰©å±•å¤±è´¥, è¯´æ˜ä¸ç”¨æ‰©å±•äº†,ç›´æ¥è·³å‡º.        // å¦‚æœæ‰©å±•æˆåŠŸ,åˆ™ç»§ç»­æ‰©å±•, ç›´åˆ°å¤±è´¥.        while (i + diameters[i] &lt; manacherStr.Length &amp;&amp; i - diameters[i] &gt;= 0)        &#123;            if (manacherStr[i + diameters[i]] == manacherStr[i - diameters[i]])                diameters[i]++;            else                break;        &#125;        // å¦‚æœè®¡ç®—å‡º i ä½ç½®å­ä¸²å³è¾¹ç•Œå·²ç»è¶…è¿‡åŸæœ‰çš„å³è¾¹ç•Œ, åˆ™æ›´æ–°æœ€å³è¾¹ç•Œå’Œä¸­å¿ƒç‚¹.        if (i + diameters[i] &gt; right_border)        &#123;            right_border = i + diameters[i];            center = i;        &#125;        maxLen = Math.Max(maxLen, diameters[i]);    &#125;    return maxLen - 1;&#125;// ç»å­—ç¬¦ä¸²ä¸­æ’å…¥å ä½ç¬¦private char[] ManacherChars(string str)&#123;    char[] res = new char[2 * str.Length + 1];    for (int i = 0; i &lt; res.Length; i++)        res[i] = i % 2 == 0 ? &#x27;#&#x27; : str[i / 2];    return res;&#125;\nç®—æ³•ä¸­çš„åº”ç”¨\nTo be continuedâ€¦\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/snow%20trees%20on%20trail.jpg","plink":"http://b.alphac.cn/2022/01/04/manacher-algo/"},{"title":"æµ…è°ˆKMPç®—æ³•","date":"2021-12-27T16:35:13.000Z","date_formatted":{"ll":"2021å¹´12æœˆ27æ—¥","L":"2021/12/27","MM-DD":"12-27"},"updated":"2022-09-15T04:52:56.372Z","content":"å­—ç¬¦ä¸²åŒ¹é…æ˜¯è®¡ç®—æœºä¸­æ¯”è¾ƒåŸºæœ¬çš„æ“ä½œã€‚æš´åŠ›çš„åšæ³•å°±æ˜¯å°†ä¸¤ä¸ªå­—ç¬¦ä¸²strå’Œpatternä»0ä½ç½®å¼€å§‹åŒ¹é…ï¼Œå¦‚æœä¸­é—´æœ‰å­—ç¬¦ä¸åŒ¹é…ï¼Œåˆ™strè·³å›å¼€å§‹ä½ç½®çš„ä¸‹ä¸€ä½ï¼Œå³1ä½ç½®ï¼Œpatternè·³å›0ä½ç½®ï¼Œä¸¤è€…å†ç»§ç»­åŒ¹é…ã€‚ä¾æ­¤ç±»æ¨ï¼Œå¦‚æœpatternä¸Šæ‰€æœ‰å­—ç¬¦åœ¨strçš„æŸä¸ªä½ç½®å¼€å§‹åéƒ½èƒ½åŒ¹é…ä¸Šï¼Œé‚£ä¹ˆåˆ™æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ï¼›å¦‚æœstråˆ°è¾¾ç»“æŸçš„ä½ç½®éƒ½æ²¡æœ‰æ‰¾åˆ°æ‰¾ä¸ªä½ç½®ï¼Œé‚£ä¹ˆsträ¸Šå°±æ²¡æœ‰åŒ¹é…patternçš„ä½ç½®ã€‚\nè¿™ä¸ªæ–¹æ³•çš„ç®—æ³•å¤æ‚åº¦æ˜¯O(n*m)(strå’Œpatterné•¿åº¦åˆ†åˆ«æ˜¯n,mï¼Œå…¶ä¸­n&gt;=m), æ˜¯æ•ˆç‡æ¯”è¾ƒä½çš„ã€‚é‚£ä¹ˆæ›´é«˜æ•ˆçš„æ–¹æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶ä¸­ä¹‹ä¸€æ˜¯KMPç®—æ³•(Knuthâ€“Morrisâ€“Pratt algorithm)ï¼Œå®ƒå¯ä»¥æŠŠæ—¶é—´å¤æ‚åº¦é™åˆ°O(n+m)ï¼Œå³O(n)ã€‚\nKMPç®—æ³•é€»è¾‘\nå¾ˆå¤šæ•ˆç‡é«˜çš„ç®—æ³•éƒ½æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´ï¼ŒKMPç®—æ³•ä¹Ÿæ˜¯ã€‚å®ƒä¼šå¯¹patternå­—ç¬¦ä¸²ç”Ÿæˆä¸€ä¸ªnextæ•°ç»„ã€‚nextæ•°ç»„å­˜å‚¨äº†patternä¸­å‰ç¼€ç­‰äºåç¼€çš„æœ€å¤§çš„é•¿åº¦ã€‚\nå½“strå’Œpatternåœ¨åŒ¹é…è¿‡ç¨‹ä¸­çš„æŸä¸ªæ—¶åˆ»str[i]å’Œpattern[j]ä¸ç›¸ç­‰ï¼Œpatternä¸ä¸€å®šè¦è·³å›åˆ°0ä½ç½®ï¼Œè€Œæ˜¯åœ¨nextæ•°ç»„ä¸­æŸ¥å‡ºè·³å›åˆ°å“ªä¸ªä½ç½®åï¼Œç»§ç»­ä¸str[i]åŒ¹é…ã€‚\nnextæ•°ç»„çš„è®¡ç®—\nnextæ•°ç»„æ˜¯é’ˆå¯¹patternå­—ç¬¦ä¸²çš„, å…¶ä¸­next[i]æ˜¯æŒ‡pattern[0...i-1]ä¹‹é—´å‰ç¼€ç­‰äºåç¼€çš„æœ€å¤§é•¿åº¦ï¼Œä½†æ˜¯ä¸å¯ä»¥æ˜¯iã€‚ä¾‹å¦‚ï¼Œpatternä¸­å‰iä¸ªå­—ç¬¦æ˜¯&quot;abbacabba&quot;, é‚£æˆ‘ä»¬çœ‹çœ‹å®ƒçš„å‰ç¼€å’Œåç¼€ï¼š\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né•¿åº¦\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nå‰ç¼€\na\nab\nabb\nabba\nabbac\nabbaca\nabbacab\nabbacabb\n\n\nåç¼€\na\nba\nbba\nabba\ncabba\nacabba\nbacabba\nbbacabba\n\n\nç›¸ç­‰?\nâœ”ï¸\nâŒ\nâŒ\nâœ”ï¸\nâŒ\nâŒ\nâŒ\nâŒ\n\n\næ‰€ä»¥è¿™é‡Œnext[i] = 4ã€‚âš ï¸æ³¨æ„ï¼šä¸å¯ä»¥è®¡ç®—è¿™ä¸ª&quot;abbacabba&quot;ï¼Œå› ä¸ºå…¶é•¿åº¦æ˜¯iã€‚å¦‚æœè®¡ç®—äº†é‚£ä¹ˆå‰ç¼€å’Œåç¼€æ°¸è¿œæ˜¯ä¸€æ ·çš„ã€‚\né‚£ä¹ˆç”Ÿæˆnextæ•°ç»„çš„ä»£ç å¦‚ä½•è¡¨è¾¾å‘¢ï¼Ÿ\n\nå¯¹äºpatternå­—ç¬¦ä¸²çš„0ä½ç½®ï¼Œå®ƒå‰é¢æ²¡æœ‰ä»»ä½•å­—ç¬¦ï¼Œè¿™é‡Œäººä¸ºè®¾next[0] = -1ã€‚\nå¯¹äº1ä½ç½®ï¼Œå®ƒå‰é¢å°±ä¸€ä¸ªå­—ç¬¦ï¼Œæ²¡æ³•ç®—å‰ç¼€å’Œåç¼€ï¼Œè¿™é‡Œä¹Ÿäººä¸ºè®¾next[1] = 0.\nå¯¹iä½ç½®ï¼Œæˆ‘ä»¬å…ˆå‡è®¾cn = next[i-1]ï¼Œæ ¹æ®nextæ•°ç»„çš„å®šä¹‰å¯ä»¥çŸ¥é“pattern[0...i-2]ä¸­å‰ç¼€å’Œåç¼€ç›¸ç­‰çš„æœ€å¤§é•¿åº¦æ˜¯cnï¼Œå³pattern[0...cn-1] == pattern[i-cn-1...i-2]ã€‚æ­¤æ—¶ï¼Œå¦‚æœ:\n\npattern[cn] == pattern[i-1], é‚£ä¹ˆnext[i] = cn + 1ï¼Œ iå’Œcnéƒ½å¯ä»¥å³ç§»ç»§ç»­æ¯”è¾ƒå»è®¡ç®—next[i+1]äº†ã€‚\npattern[cn] != pattern[i-1], é‚£ä¹ˆè·å–cnä½ç½®çš„next[cn]çš„å€¼ï¼Œå‡è®¾æ˜¯cn'ã€‚é‚£ä¹ˆå°±æœ‰pattern[0...cn'-1] == pattern[cn-cn'...cn-1]ï¼›å› ä¸ºä¹‹å‰è¯´å»pattern[0...cn-1] == pattern[i-cn-1...i-2]ï¼Œé‚£ä¹ˆpattern[i-cn-1...i-2]è‚¯å®šä¹Ÿå­˜åœ¨ä¸€ä¸ªcn'é•¿åº¦ä½¿å¾—pattern[i-cn-1...i-cn-1+(cn'-1)] == pattern[i-2-(cn'-1)...i-2],é‚£ä¹ˆä¹Ÿå°±æœ‰pattern[0...cn'-1] == pattern[i-2-(cn'-1)...i-2]ã€‚æ­¤æ—¶å›åˆ°ç¬¬ä¸€æ­¥çš„é€»è¾‘ï¼Œå¦‚æœpattern[cn'] == pattern[i-1], åˆ™next[i] = cn' + 1ï¼Œiå’Œcn'å³ç§»ï¼›å¦‚æœpattern[cn'] ï¼= pattern[i-1]ï¼Œç»§ç»­ç¬¬äºŒæ­¥çš„é€»è¾‘ï¼Œè·å–cn'ä½ç½®çš„next[cn']çš„å€¼ï¼Œä¸€ç›´å‘å‰æ‰¾æ»¡è¶³è¦æ±‚çš„cnã€‚\nä½†æ˜¯ï¼Œå¦‚æœcnå·²ç»è·³åˆ°0ä½ç½®äº†ï¼Œé€€æ— å¯é€€äº†ï¼Œé‚£ä¹ˆnext[i] == 0ï¼Œå³iä½ç½®æ²¡æœ‰æ»¡è¶³è¦æ±‚çš„å‰ç¼€å’Œåç¼€ã€‚\n\n\n\nä¾‹å¦‚pattern = â€œabcabdabcabfâ€ (è¿™é‡Œå°±æ¯ä¸€æ­¥éƒ½åˆ†æäº†):\n\nnextæ•°ç»„çš„0 1ä½ç½®çš„å€¼æ˜¯å›ºå®šçš„ã€‚\nå¯¹äºindex = 6ï¼Œå› ä¸ºå®ƒçš„å‰ä¸€ä½next[5] == 2ï¼Œå³pattern[0..1] == pattern[3..4], ä½†pattern[2] != pattern[5], é‚£ä¹ˆæŸ¥æ‰¾next[2] == 0ï¼Œä½†pattern[0] != pattern[5]ã€‚é‚£ä¹ˆç»§ç»­æ‰¾next[0],æ­¤æ—¶å·²ç»æ˜¯0ä½ç½®äº†ï¼Œé‚£ä¹ˆnext[6] = 0ï¼›\nå½“index = 11æ—¶ï¼Œå®ƒçš„å‰ä¸€ä½next[10] == 4, å³pattern[0..3] == pattern[6..9], æ­¤æ—¶pattern[4] != pattern[10]ï¼Œé‚£ä¹ˆnext[11] = 5;\n\n\n12345678910111213141516171819202122private int[] NextArray(string pattern)&#123;    if (pattern.Length == 1)        return new int[] &#123; -1 &#125;;    int[] next = new int[pattern.Length];    next[0] = -1;    next[1] = 0;    int i = 2;    int cn = 0; //å½“å‰ä¸i-1ä½ç½®å­—ç¬¦æ¯”è¾ƒçš„ä½ç½®    while (i &lt; next.Length)    &#123;        if (pattern[i - 1] == pattern[cn])            next[i++] = ++cn;        else if (cn &gt; 0)            cn = next[cn];        else            next[i++] = 0;    &#125;    return next;&#125;\nKMPåŒ¹é…è¿‡ç¨‹\nç°åœ¨nextæ•°ç»„å·²ç»ç”Ÿæˆå¥½äº†ï¼Œé‚£ä¹ˆå¦‚æœç”¨åŒ¹é…å­—ç¬¦ä¸²å‘¢ï¼Ÿ\n\né¦–å…ˆstrå’Œpatternå­—ç¬¦ä¸²éƒ½æ˜¯ä»0ä½ç½®å‡ºå‘è¿›è¡Œä¸€ä¸€åŒ¹é…ã€‚\nå‡è®¾strå’Œpatternåˆ†åˆ«åœ¨i, jä½ç½®æ—¶ä¸ç›¸ç­‰ï¼Œå»nextæ•°ç»„æŸ¥æ‰¾next[j]çš„å€¼ï¼Œå‡è®¾æ˜¯j'ã€‚æ­¤æ—¶è®©str[i]ä¸next[j']æ¯”è¾ƒï¼š\n\nå¦‚æœç›¸ç­‰ï¼Œstrå’Œpatternçš„i, j'å„è‡ªå³ç§»ï¼Œç»§ç»­ä¸‹ä¸€æ­¥çš„æ¯”è¾ƒï¼›\nå¦‚æœä¸ç­‰ï¼Œnextæ•°ç»„ä¸­æŸ¥æ‰¾next[j']ï¼Œç»§ç»­ä¸str[i]æ¯”è¾ƒï¼Œå¦‚æ­¤åå¤ï¼›\nå¦‚æœæ­¤æ—¶next[j'] == -1ï¼Œå³æŸ¥æ‰¾åˆ°è¾¾pattern[0]äº†è¿˜æ˜¯æ²¡æ‰¾åˆ°, é‚£ä¹ˆå°±strå°±ä»i+1ä½ç½®å¼€å§‹é‡æ–°ä¸patternåŒ¹é…\n\n\nå¦‚æœjåˆ°è¾¾äº†patternå³ç«¯ï¼Œè¯´æ˜å®Œå…¨åŒ¹é…æˆåŠŸäº†ï¼Œsträ¸Šçš„ä½ç½®å°±æ˜¯i-jã€‚å¦‚æœiå…ˆåˆ°è¾¾strçš„å³ç«¯ï¼Œå°±æ˜¯æ²¡æœ‰åŒ¹é…æˆåŠŸã€‚\n\nä¾‹å¦‚å¯¹äºstr = â€œabcabdabcabefâ€, pattern = â€œabcabdabcabfâ€ã€‚ç”±ä¸Šæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºnextæ•°ç»„æ˜¯[-1, 0, 0, 0, 1, 2, 0, 1, 2, 3, 4, 5]ã€‚é‚£ä¹ˆå½“strå’ŒpatternåŒ¹é…åˆ°index=11æ˜¯str[11] = 'e', pattern[11] = 'f'ï¼Œé‚£ä¹ˆåœ¨nextæ•°ç»„ä¸­æŸ¥å¾—next[11] == 5, æˆ‘ä»¬å‘ç°pattern[0...4](é•¿åº¦æ˜¯5)å’Œstr[11]ä¹‹å‰çš„5ä¸ªå­—ç¬¦å®Œå…¨ç›¸ç­‰ã€‚é‚£ä¹ˆæˆ‘åªéœ€è¦æ¯”è¾ƒstr[11]ä¸pattern[5]æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œç»§ç»­å‘å³åŒ¹é…ï¼Œä¸ç”¨è·³å›åˆ°èµ·ç‚¹å†åŒ¹é…äº†ã€‚\nè¿™é‡Œstr[11] != pattern[5]ï¼Œå†ä»nextæ•°ç»„æŸ¥å¾—next[5] == 2ã€‚åŒæ ·ï¼Œpattern[0...1]ä¸str[11]ä¹‹å‰çš„2ä¸ªå­—ç¬¦å®Œå…¨ç›¸ç­‰ï¼Œé‚£ä¹ˆæ¯”è¾ƒstr[11]ä¸pattern[2]æ˜¯å¦ç›¸ç­‰, ä»¥æ­¤ç±»æ¨, ç›´åˆ°next[0] == -1ï¼Œè¯´æ˜patternä¸­æ²¡æœ‰å­—ç¬¦èƒ½æ»¡è¶³åŒ¹é…æ¡ä»¶ä¸str[11]åŒ¹é…ä¸Šï¼Œé‚£ä¹ˆåªèƒ½ä»str[11]çš„ä¸‹ä¸€ä½é‡æ–°å¼€å§‹åŒ¹é…ã€‚\n\n1234567891011121314151617181920212223public int KMPMatch(string str, string pattern)&#123;    if (str == null || str.Length == 0 || pattern == null || pattern.Length == 0 || str.Length &lt; pattern.Length)        return -1;    int[] next = NextArray(pattern); // O(M) m &lt;= n;    int i = 0, j = 0;    while (i &lt; str.Length &amp;&amp; j &lt; pattern.Length)    &#123;        if (str[i] == pattern[j])        &#123;            i++;            j++;        &#125;        else if (next[j] == -1) // j == 0            i++;        else            j = next[j];    &#125;    return j == pattern.Length ? i - j : -1;&#125;\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/photo-1436699005328-ac3965e80aa7.jpg","plink":"http://b.alphac.cn/2021/12/27/kmp-algo/"},{"title":"é…ç½®å¤šä¸ªGitè´¦å·","date":"2021-12-25T14:36:09.000Z","date_formatted":{"ll":"2021å¹´12æœˆ25æ—¥","L":"2021/12/25","MM-DD":"12-25"},"updated":"2022-09-15T04:52:56.372Z","content":"ç¨‹åºå‘˜åŒå­¦åœ¨å¹³æ—¶å·¥ä½œå’Œå­¦ä¹ è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°, è‡ªå·±æœ‰å¤šä¸ªgitè´¦å·, æœ‰çš„æ˜¯å·¥ä½œçš„æœ‰çš„ä¸ªäººå­¦ä¹ ç”¨çš„, åè€…è‡ªå·±æœ‰å¤šä¸ªgitè´¦å·åˆ†åˆ«åœ¨ä¸åŒå¹³å°,å¦‚github, gitee, bitbucketç­‰ç­‰. ä½†ç”µè„‘å°±ä¸€å°, é‚£å¦‚ä½•å¿«æ·æœ‰æ•ˆçš„ä½¿ç”¨è¿™ä¸ªè´¦å·åœ¨ä¸åŒçš„é¡¹ç›®ä¸­å»æäº¤ä»£ç å‘¢? æˆ‘ä»¬å¯ä»¥é…ç½®SSH key.\næ¸…é™¤gitå…¨å±€é…ç½®\nå¦‚æœä¹‹å‰é€šè¿‡gitå‘½ä»¤è®¾ç½®è¿‡å…¨å±€çš„user.nameå’Œuser.email, é¦–å…ˆæˆ‘ä»¬éœ€è¦æŠŠå®ƒåˆ é™¤æ‰.\n12git config --global user.name &quot;your_name&quot;git config --global user.email  &quot;your_email&quot;\nå¦‚æœä¸æ¸…æ¥šè‡ªå·±ä¹‹å‰æ˜¯å¦è®¾ç½®è¿‡, å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤å»æ£€æŸ¥ä¸€ä¸‹. å¹¶ç”¨ä¸‹é¢çš„å‘½ä»¤å»åˆ é™¤.\n123456# æŸ¥çœ‹å…¨å±€é…ç½®git config --global --list# åˆ é™¤å…¨å±€é…ç½®çš„ç”¨æˆ·ågit config --global --unset user.name# åˆ é™¤å…¨å±€é…ç½®çš„é‚®ç®±git config --global --unset user.email\n\nå…¶å®è¿™äº›é…ç½®æ•°æ®, å¦‚æœæ²¡æœ‰ç‰¹åˆ«è®¾ç½®è·¯å¾„, é»˜è®¤æ˜¯å­˜åœ¨C:\\Users\\&lt;user_name&gt;\\.gitconfig (Windowsç³»ç»Ÿ), æ‰€æœ‰å¯ä»¥æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶, ç„¶åç”¨notepadæ‰“å¼€ä¹‹é—´ä¿®æ”¹ä¿å­˜.\né…ç½®SSH Keys\nç”ŸæˆSSH Keys\né¦–å…ˆéœ€è¦å»ç”ŸæˆSSH Keys, å…ˆå»C:\\Users\\&lt;user_name&gt;\\.sshæ–‡ä»¶å¤¹. å¦‚æœè·¯å¾„ä¸‹æ²¡æœ‰.sshæ–‡ä»¶å¤¹, å¯ä»¥åˆ›å»ºä¸€ä¸ªã€‚ç„¶ååœ¨å‘½ä»¤è¡Œä¸­ç”¨ssh-keygen -t rsa -C &quot;new email&quot;å»ç”Ÿæˆkeyçš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯å…¬é’¥å’Œç§é’¥ã€‚å…¶ä¸­.pubæ˜¯å…¬é’¥ã€‚\n\nç§é’¥æ–‡ä»¶æ·»åŠ åˆ°SSH Agent\né»˜è®¤ssh-agentåªä¼šè¯»å–id_rsaæ–‡ä»¶ï¼Œä¸ºäº†è®©å®ƒè¯†åˆ«æˆ‘ä»¬æ–°ç”Ÿæˆçš„ç§é’¥ï¼Œéœ€è¦ç”¨ssh-addå°†è¿™äº›ç§é’¥æ·»åŠ åˆ°ssh-agentä¸­ã€‚\n\n\n\næ·»åŠ æ—¶å¦‚æœå‡ºç° Could not open a connection to your authentication agent é”™è¯¯ï¼Œè¯·å…ˆè¿è¡Œssh-agent bashå‘½ä»¤ï¼Œä¹‹ååœ¨æ·»åŠ ã€‚\nå¦‚æœè¿è¡Œssh-agent bashæ˜¯å‡ºç°  unable to start ssh-agent service, error :1058, è¯·æ£€æŸ¥  OpenSSH Authentication Agent æœåŠ¡ï¼Œç¡®ä¿å…¶æ˜¯è¿è¡ŒçŠ¶æ€ã€‚ref: https://stackoverflow.com/questions/52113738/starting-ssh-agent-on-windows-10-fails-unable-to-start-ssh-agent-service-erro\n\n\né…ç½®configæ–‡ä»¶\nä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é…ç½®configæ–‡ä»¶ã€‚è¯·çœ‹.sshè·¯å¾„ä¸‹æ˜¯å¦æœ‰è¯¥æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰åˆ›å»ºä¸€ä¸ªã€‚ç„¶åå¯ä»¥ä»¿ç…§ä¸‹é¢çš„å†…å®¹å»å¡«å†™ç›¸åº”çš„ä½ çš„configé…ç½®ã€‚\n1234567891011# Default github Host github.com    HostName github.com    User &quot;&lt;user_name&gt;&quot;    IdentityFile ~/.ssh/id_rsa_github# giteeHost gitee.com    HostName gitee.com    User &quot;&lt;user_name&gt;&quot;    IdentityFile ~/.ssh/id_rsa_gitee\næ·»åŠ å…¬é’¥åˆ°Gitç³»ç»Ÿ\nåŸºæœ¬ä¸Šæ‰€æœ‰æ”¯æŒgitçš„ç½‘ç«™éƒ½ä¼šæœ‰æ·»åŠ SSH Keyçš„åœ°æ–¹ï¼Œä¾‹å¦‚githubæ˜¯åœ¨https://github.com/settings/keysã€‚æ·»åŠ æ–°çš„ssh keyï¼Œ å¹¶å°†ä¹‹å‰ç”Ÿæˆç›¸åº”çš„.pubæ–‡ä»¶ä¸­çš„å†…å®¹å¤åˆ¶è¿‡å»ã€‚\næµ‹è¯•é…ç½®\næœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ssh -Tå‘½ä»¤å»æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸã€‚\n\nä¹‹åï¼Œæœ‰æ–°çš„gitè´¦å·ï¼Œå¯ä»¥æŒ‰åŒæ ·çš„æ­¥éª¤ï¼Œæ·»åŠ è®¾ç½®æ–°çš„è´¦å·ã€‚åƒä¸‡ä¸è¦ä¸ºgité…ç½®å…¨å±€çš„user.nameå’Œuser.emailã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ä¸åŒçš„repositoryè®¾ç½®æœ¬åœ°çš„user.nameå’Œuser.emailã€‚\n12git config user.name &quot;your_name&quot;git config user.email  &quot;your_email&quot;\n","thumbnail":"https://ichrisj.gitee.io/reslib/images/thumbnails/yancy-min-842ofHC6MaI-unsplash.jpg","plink":"http://b.alphac.cn/2021/12/25/configure-multiple-git-accounts/"}]